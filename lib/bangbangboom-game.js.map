{"version":3,"sources":["webpack://BangGame/webpack/universalModuleDefinition","webpack://BangGame/webpack/bootstrap","webpack://BangGame/./node_modules/howler/dist/howler.js","webpack://BangGame/./node_modules/inversify/lib/annotation/decorator_utils.js","webpack://BangGame/./node_modules/inversify/lib/annotation/inject.js","webpack://BangGame/./node_modules/inversify/lib/annotation/injectable.js","webpack://BangGame/./node_modules/inversify/lib/annotation/multi_inject.js","webpack://BangGame/./node_modules/inversify/lib/annotation/named.js","webpack://BangGame/./node_modules/inversify/lib/annotation/optional.js","webpack://BangGame/./node_modules/inversify/lib/annotation/post_construct.js","webpack://BangGame/./node_modules/inversify/lib/annotation/tagged.js","webpack://BangGame/./node_modules/inversify/lib/annotation/target_name.js","webpack://BangGame/./node_modules/inversify/lib/annotation/unmanaged.js","webpack://BangGame/./node_modules/inversify/lib/bindings/binding.js","webpack://BangGame/./node_modules/inversify/lib/bindings/binding_count.js","webpack://BangGame/./node_modules/inversify/lib/constants/error_msgs.js","webpack://BangGame/./node_modules/inversify/lib/constants/literal_types.js","webpack://BangGame/./node_modules/inversify/lib/constants/metadata_keys.js","webpack://BangGame/./node_modules/inversify/lib/container/container.js","webpack://BangGame/./node_modules/inversify/lib/container/container_module.js","webpack://BangGame/./node_modules/inversify/lib/container/container_snapshot.js","webpack://BangGame/./node_modules/inversify/lib/container/lookup.js","webpack://BangGame/./node_modules/inversify/lib/inversify.js","webpack://BangGame/./node_modules/inversify/lib/planning/context.js","webpack://BangGame/./node_modules/inversify/lib/planning/metadata.js","webpack://BangGame/./node_modules/inversify/lib/planning/metadata_reader.js","webpack://BangGame/./node_modules/inversify/lib/planning/plan.js","webpack://BangGame/./node_modules/inversify/lib/planning/planner.js","webpack://BangGame/./node_modules/inversify/lib/planning/queryable_string.js","webpack://BangGame/./node_modules/inversify/lib/planning/reflection_utils.js","webpack://BangGame/./node_modules/inversify/lib/planning/request.js","webpack://BangGame/./node_modules/inversify/lib/planning/target.js","webpack://BangGame/./node_modules/inversify/lib/resolution/instantiation.js","webpack://BangGame/./node_modules/inversify/lib/resolution/resolver.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_in_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_in_when_on_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_on_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_to_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_when_on_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/binding_when_syntax.js","webpack://BangGame/./node_modules/inversify/lib/syntax/constraint_helpers.js","webpack://BangGame/./node_modules/inversify/lib/utils/binding_utils.js","webpack://BangGame/./node_modules/inversify/lib/utils/exceptions.js","webpack://BangGame/./node_modules/inversify/lib/utils/id.js","webpack://BangGame/./node_modules/inversify/lib/utils/serialization.js","webpack://BangGame/./node_modules/process/browser.js","webpack://BangGame/./node_modules/reflect-metadata/Reflect.js","webpack://BangGame/(webpack)/buildin/global.js","webpack://BangGame/./src/core/MapCore.ts","webpack://BangGame/./src/core/Utils.ts","webpack://BangGame/./src/game/Common/Animation.ts","webpack://BangGame/./src/game/Common/FixRatioContainer.ts","webpack://BangGame/./src/game/Common/InCodeAssests.ts","webpack://BangGame/./src/game/Common/InfoEffect.ts","webpack://BangGame/./src/game/Common/InfoNumberSprite.ts","webpack://BangGame/./src/game/Common/InfoSprite.ts","webpack://BangGame/./src/game/Common/InfoType.ts","webpack://BangGame/./src/game/Common/NumberSprite.ts","webpack://BangGame/./src/game/Common/ParticleEmitter.ts","webpack://BangGame/./src/game/Common/Sprite2d.ts","webpack://BangGame/./src/game/Core/Constants.ts","webpack://BangGame/./src/game/Core/GameConfig.ts","webpack://BangGame/./src/game/Core/GameMap.ts","webpack://BangGame/./src/game/Core/GameState.ts","webpack://BangGame/./src/game/Core/JudgeManager.Auto.ts","webpack://BangGame/./src/game/Core/JudgeManager.ts","webpack://BangGame/./src/game/Core/MusicManager.ts","webpack://BangGame/./src/game/Core/Projection.ts","webpack://BangGame/./src/game/Core/SoundManager.ts","webpack://BangGame/./src/game/Game.ts","webpack://BangGame/./src/game/Layers/BackgroundLayer.ts","webpack://BangGame/./src/game/Layers/Components/FlickNoteSprite.ts","webpack://BangGame/./src/game/Layers/Components/SimLineSprite.ts","webpack://BangGame/./src/game/Layers/Components/SingleNoteSprite.ts","webpack://BangGame/./src/game/Layers/Components/SlideAmongSprite.ts","webpack://BangGame/./src/game/Layers/Components/SlideBarSprite.ts","webpack://BangGame/./src/game/Layers/Components/SlideNoteSprite.ts","webpack://BangGame/./src/game/Layers/DebugLayer.ts","webpack://BangGame/./src/game/Layers/FinishLayer.ts","webpack://BangGame/./src/game/Layers/GameLayer.ts","webpack://BangGame/./src/game/Layers/LoadingLayer.ts","webpack://BangGame/./src/game/Layers/PauseLayer.ts","webpack://BangGame/./src/game/Layers/ReadyLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/AutoPlayLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/EffectLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/IntereactionLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/LaneEffectLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/LaneLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/NotesLayer.ts","webpack://BangGame/./src/game/Layers/Sublayers/UILayer.ts","webpack://BangGame/./src/game/Scenes/FinishScene.ts","webpack://BangGame/./src/game/Scenes/GameScene.ts","webpack://BangGame/./src/game/Scenes/LoadingScene.ts","webpack://BangGame/./src/game/Scenes/ReadyScene.ts","webpack://BangGame/./src/game/Utils/GameEvent.ts","webpack://BangGame/./src/game/Utils/SceneSwitcher.ts","webpack://BangGame/./src/game/Utils/SymbolClasses.ts","webpack://BangGame/./src/game/Utils/Ticker.ts","webpack://BangGame/./src/game/Utils/Utils.ts","webpack://BangGame/./src/index.ts","webpack://BangGame/external {\"root\":\"PIXI\",\"commonjs\":\"pixi.js\",\"commonjs2\":\"pixi.js\",\"amd\":\"pixi.js\"}"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,MAAM;AACtB,gBAAgB,aAAa;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;;AAEA;AACA,yBAAyB,cAAc;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA,uBAAuB,cAAc;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA,sCAAsC,MAAM;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD;;AAEvD;AACA;AACA;;AAEA;AACA,6EAA6E;AAC7E;AACA,iDAAiD;AACjD,gDAAgD;AAChD,gDAAgD;AAChD,gDAAgD;AAChD,gDAAgD;AAChD,kDAAkD;AAClD,mDAAmD,uCAAuC,uCAAuC;AACjI,mDAAmD,uCAAuC,uCAAuC;AACjI,kDAAkD;AAClD,kDAAkD;AAClD,kDAAkD;AAClD,qDAAqD,wCAAwC;AAC7F;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;;AAEA;AACA,yBAAyB,cAAc;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,sBAAsB;AACzC;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,YAAY;AAC5C,kCAAkC,aAAa;AAC/C,kCAAkC,aAAa;AAC/C,4CAA4C,kBAAkB;AAC9D,4CAA4C,kBAAkB;AAC9D,oCAAoC,cAAc;AAClD,kCAAkC,aAAa;AAC/C,kCAAkC,aAAa;AAC/C,kCAAkC,aAAa;AAC/C,sCAAsC,eAAe;AACrD,kCAAkC,aAAa;AAC/C,kCAAkC,aAAa;AAC/C,sCAAsC,eAAe;AACrD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,oBAAoB;AACvC;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,cAAc;AAC9B,gBAAgB,QAAQ;AACxB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,cAAc;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,SAAS;AACzB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,2BAA2B,IAAI,eAAe;AAC1E;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,SAAS;AACzB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,SAAS;AACzB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,MAAM;AACvC;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,MAAM;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,MAAM;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,MAAM;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,kDAAkD,EAAE;AACnE;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAkB,GAAG;AACrB;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,cAAc,YAAY;AAC1B,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,cAAc,KAAK;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD,IAAI,iCAAO,EAAE,mCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;AAAA,oGAAC;AACN;;AAEA;AACA,MAAM,IAA8B;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,cAAc;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,MAAM;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,aAAa;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,aAAa;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc,SAAS;AACvB,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC,eAAe;AACrD,gCAAgC,YAAY;AAC5C,gDAAgD,oBAAoB;;AAEpE;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,YAAY;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,cAAc;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc,SAAS;AACvB,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,cAAc,MAAM;AACpB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;ACplGY;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,uCAAuC;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzDa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qFAAyB;AACpD,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9Ba;AACb,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,qFAAyB;AACnD,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACda;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,qFAAyB;AACnD,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACda;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACfa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACXa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,wBAAwB,mBAAO,CAAC,qFAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACXa;AACb,8CAA8C,cAAc;AAC5D,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,WAAW,mBAAO,CAAC,6DAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,aAAa;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACnCa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3Da;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxBa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACZa;AACb;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,6EAAqB;AAC7C,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,wBAAwB,mBAAO,CAAC,6FAA6B;AAC7D,gBAAgB,mBAAO,CAAC,6EAAqB;AAC7C,iBAAiB,mBAAO,CAAC,mFAAwB;AACjD,0BAA0B,mBAAO,CAAC,6FAA6B;AAC/D,WAAW,mBAAO,CAAC,6DAAa;AAChC,sBAAsB,mBAAO,CAAC,mFAAwB;AACtD,2BAA2B,mBAAO,CAAC,0FAAsB;AACzD,eAAe,mBAAO,CAAC,kEAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA,oDAAoD;AACpD;AACA,UAAU;AACV;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gCAAgC,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,qEAAqE,mBAAmB,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,SAAS,EAAE;AACX;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACpUa;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,6DAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AClBa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACba;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,0BAA0B,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iCAAiC,EAAE;AAC3E,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AC9Ea;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,0FAA2B;AAC9C;AACA,kBAAkB,mBAAO,CAAC,kFAAuB;AACjD;AACA,sBAAsB,mBAAO,CAAC,0FAA2B;AACzD;AACA;AACA;AACA,yBAAyB,mBAAO,CAAC,gGAA8B;AAC/D;AACA;AACA,mBAAmB,mBAAO,CAAC,sFAAyB;AACpD;AACA,eAAe,mBAAO,CAAC,8EAAqB;AAC5C;AACA,cAAc,mBAAO,CAAC,4EAAoB;AAC1C;AACA,eAAe,mBAAO,CAAC,8EAAqB;AAC5C;AACA;AACA,iBAAiB,mBAAO,CAAC,kFAAuB;AAChD;AACA,kBAAkB,mBAAO,CAAC,oFAAwB;AAClD;AACA,qBAAqB,mBAAO,CAAC,0FAA2B;AACxD;AACA,oBAAoB,mBAAO,CAAC,wFAA0B;AACtD;AACA,uBAAuB,mBAAO,CAAC,8FAA6B;AAC5D;AACA,wBAAwB,mBAAO,CAAC,4FAA4B;AAC5D;AACA,WAAW,mBAAO,CAAC,4DAAY;AAC/B;AACA,wBAAwB,mBAAO,CAAC,gGAA8B;AAC9D;AACA,2BAA2B,mBAAO,CAAC,8FAA6B;AAChE;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,kFAAuB;AACrD;AACA,sBAAsB,mBAAO,CAAC,kFAAuB;AACrD;;;;;;;;;;;;;AC9Ca;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,6DAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,6DAA6D;AAC1F;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AClBa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACpBa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACTa;AACb,8CAA8C,cAAc;AAC5D,sBAAsB,mBAAO,CAAC,yFAA2B;AACzD,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,mBAAmB,mBAAO,CAAC,6EAAqB;AAChD,sBAAsB,mBAAO,CAAC,mFAAwB;AACtD,gBAAgB,mBAAO,CAAC,mEAAW;AACnC,iBAAiB,mBAAO,CAAC,qEAAY;AACrC,aAAa,mBAAO,CAAC,6DAAQ;AAC7B,yBAAyB,mBAAO,CAAC,qFAAoB;AACrD,gBAAgB,mBAAO,CAAC,mEAAW;AACnC,eAAe,mBAAO,CAAC,iEAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0BAA0B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1Ja;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AC1Ba;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,+EAAsB;AAC7C,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,sBAAsB,mBAAO,CAAC,mFAAwB;AACtD;AACA,eAAe,mBAAO,CAAC,iEAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3Ha;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,6DAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACvBa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,WAAW,mBAAO,CAAC,6DAAa;AAChC,iBAAiB,mBAAO,CAAC,qEAAY;AACrC,yBAAyB,mBAAO,CAAC,qFAAoB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yCAAyC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACzFa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qFAAyB;AACpD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjDa;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,mBAAmB,mBAAO,CAAC,6EAAqB;AAChD,sBAAsB,mBAAO,CAAC,mFAAwB;AACtD,sBAAsB,mBAAO,CAAC,iFAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,sDAAsD,EAAE;AAC3J;AACA;AACA,8FAA8F,iDAAiD,EAAE;AACjJ;AACA;AACA,+FAA+F,kDAAkD,EAAE;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjGa;AACb,8CAA8C,cAAc;AAC5D,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,+BAA+B,mBAAO,CAAC,+FAA0B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACtBa;AACb,8CAA8C,cAAc;AAC5D,0BAA0B,mBAAO,CAAC,qFAAqB;AACvD,0BAA0B,mBAAO,CAAC,qFAAqB;AACvD,4BAA4B,mBAAO,CAAC,yFAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACvEa;AACb,8CAA8C,cAAc;AAC5D,4BAA4B,mBAAO,CAAC,yFAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACba;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD,sBAAsB,mBAAO,CAAC,2FAA4B;AAC1D,kCAAkC,mBAAO,CAAC,qGAA6B;AACvE,+BAA+B,mBAAO,CAAC,+FAA0B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iDAAiD;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,uCAAuC,EAAE;AACzF;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACxEa;AACb,8CAA8C,cAAc;AAC5D,0BAA0B,mBAAO,CAAC,qFAAqB;AACvD,4BAA4B,mBAAO,CAAC,yFAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AC5Da;AACb,8CAA8C,cAAc;AAC5D,0BAA0B,mBAAO,CAAC,qFAAqB;AACvD,2BAA2B,mBAAO,CAAC,uFAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACjGa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,2FAA4B;AACvD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;;;;;;;;;;;ACvCa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA,+CAA+C,6CAA6C,EAAE;AAC9F;AACA;AACA;;;;;;;;;;;;;ACZa;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNa;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qFAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mDAAmD;AAC3G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,6BAA6B,gBAAgB,kBAAkB;AAC/D;AACA;AACA;AACA;AACA,+BAA+B,4CAA4C;AAC3E;AACA,mCAAmC,wBAAwB,kBAAkB,EAAE;AAC/E,mCAAmC,yBAAyB,EAAE,EAAE;AAChE;AACA,uCAAuC,8BAA8B;AACrE,uCAAuC,mBAAmB,EAAE;AAC5D;AACA,uCAAuC,qDAAqD;AAC5F,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,aAAa;AAChF,qEAAqE,aAAa;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0BAA0B,EAAE;AAClE;AACA;AACA,iBAAiB;AACjB,oDAAoD,+CAA+C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,0DAA0D;AAC5G,oDAAoD,4DAA4D;AAChH,qDAAqD,4DAA4D;AACjH,2DAA2D,uBAAuB;AAClF,6DAA6D,uBAAuB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,uBAAuB,EAAE;AAC/D;AACA;AACA,iBAAiB;AACjB,sDAAsD,6BAA6B;AACnF,sDAAsD,0CAA0C;AAChG,yDAAyD,gCAAgC;AACzF,mDAAmD,mBAAmB;AACtE,kDAAkD,yBAAyB;AAC3E,oDAAoD,2BAA2B;AAC/E,qDAAqD,4BAA4B;AACjF,2DAA2D,oBAAoB;AAC/E,6DAA6D,oBAAoB;AACjF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0BAA0B;AACtF;AACA;AACA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,0BAA0B;;;;;;;;;;;;;AC1mC3B;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAsC;AAyC/B,SAAS,eAAe,CAAC,GAAY;IACxC,IAAM,MAAM,GAAG,CAAC,EAAE,CAAC;IAEnB,KAAiB,UAAc,EAAd,QAAG,CAAC,UAAU,EAAd,cAAc,EAAd,IAAc,EAAE;QAA5B,IAAM,EAAE;QACT,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,QAAQ,E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","file":"bangbangboom-game.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pixi.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"BangGame\", [\"pixi.js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BangGame\"] = factory(require(\"pixi.js\"));\n\telse\n\t\troot[\"BangGame\"] = factory(root[\"PIXI\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_pixi_js__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","/*!\n *  howler.js v2.1.2\n *  howlerjs.com\n *\n *  (c) 2013-2019, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        for (var i=0; i<self.html5PoolSize; i++) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhrWithCredentials = o.xhrWithCredentials || false;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended. \n        // If there is, play that sound. If not, continue as usual.  \n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = loop;\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = parseFloat(from);\n      to = parseFloat(to);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Make sure the volume is in the right bounds.\n        vol = Math.max(0, vol);\n        vol = Math.min(1, vol);\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            self._emit('seek', id);\n\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.withCredentials = self._xhrWithCredentials;\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : 1, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.1.2\n *  howlerjs.com\n *\n *  (c) 2013-2019, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n          panner.panningModel = pa.panningModel;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexports.LazyServiceIdentifer = LazyServiceIdentifer;\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar id_1 = require(\"../utils/id\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id_1.id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexports.STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexports.AsyncContainerModule = AsyncContainerModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keys = require(\"./constants/metadata_keys\");\nexports.METADATA_KEY = keys;\nvar container_1 = require(\"./container/container\");\nexports.Container = container_1.Container;\nvar literal_types_1 = require(\"./constants/literal_types\");\nexports.BindingScopeEnum = literal_types_1.BindingScopeEnum;\nexports.BindingTypeEnum = literal_types_1.BindingTypeEnum;\nexports.TargetTypeEnum = literal_types_1.TargetTypeEnum;\nvar container_module_1 = require(\"./container/container_module\");\nexports.AsyncContainerModule = container_module_1.AsyncContainerModule;\nexports.ContainerModule = container_module_1.ContainerModule;\nvar injectable_1 = require(\"./annotation/injectable\");\nexports.injectable = injectable_1.injectable;\nvar tagged_1 = require(\"./annotation/tagged\");\nexports.tagged = tagged_1.tagged;\nvar named_1 = require(\"./annotation/named\");\nexports.named = named_1.named;\nvar inject_1 = require(\"./annotation/inject\");\nexports.inject = inject_1.inject;\nexports.LazyServiceIdentifer = inject_1.LazyServiceIdentifer;\nvar optional_1 = require(\"./annotation/optional\");\nexports.optional = optional_1.optional;\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nexports.unmanaged = unmanaged_1.unmanaged;\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nexports.multiInject = multi_inject_1.multiInject;\nvar target_name_1 = require(\"./annotation/target_name\");\nexports.targetName = target_name_1.targetName;\nvar post_construct_1 = require(\"./annotation/post_construct\");\nexports.postConstruct = post_construct_1.postConstruct;\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nexports.MetadataReader = metadata_reader_1.MetadataReader;\nvar id_1 = require(\"./utils/id\");\nexports.id = id_1.id;\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nexports.decorate = decorator_utils_1.decorate;\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nexports.traverseAncerstors = constraint_helpers_1.traverseAncerstors;\nexports.taggedConstraint = constraint_helpers_1.taggedConstraint;\nexports.namedConstraint = constraint_helpers_1.namedConstraint;\nexports.typeConstraint = constraint_helpers_1.typeConstraint;\nvar serialization_1 = require(\"./utils/serialization\");\nexports.getServiceIdentifierAsString = serialization_1.getServiceIdentifierAsString;\nvar binding_utils_1 = require(\"./utils/binding_utils\");\nexports.multiBindToService = binding_utils_1.multiBindToService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar Context = (function () {\n    function Context(container) {\n        this.id = id_1.id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexports.Context = Context;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar context_1 = require(\"./context\");\nvar metadata_1 = require(\"./metadata\");\nvar plan_1 = require(\"./plan\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === binding_count_1.BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new plan_1.Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = reflection_utils_1.getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            if (context.plan) {\n                serialization_1.circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inject_1 = require(\"../annotation/inject\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar serialization_1 = require(\"../utils/serialization\");\nexports.getFunctionName = serialization_1.getFunctionName;\nvar target_1 = require(\"./target\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = constructorTargets.concat(propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof inject_1.LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = targets.concat(baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nexports.getBaseClassDependencyCount = getBaseClassDependencyCount;\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id_1.id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, [void 0].concat(injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Request;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = function (container) {\n    return function (service) {\n        return function () {\n            var types = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                types[_i] = arguments[_i];\n            }\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\n        };\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\nexports.isStackOverflowExeption = isStackOverflowExeption;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexports.id = id;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { uuid, findex } from \"./Utils\"\r\n\r\nexport type IdItem = {\r\n    /** random uuid string for tracking */\r\n    id: string\r\n}\r\n\r\nexport type Point = {\r\n    /** the first on the left is 0 */\r\n    lane: number\r\n    /** number of 1/24 beats from timepoint offset */\r\n    time: number\r\n}\r\n\r\nexport type Single = {\r\n    type: \"single\"\r\n} & IdItem & Point\r\n\r\nexport type Flick = {\r\n    type: \"flick\"\r\n} & IdItem & Point\r\n\r\nexport type Slide = {\r\n    type: \"slide\"\r\n    flickend: boolean\r\n    notes: Array<Point & IdItem>\r\n} & IdItem\r\n\r\nexport type Note = Single | Flick | Slide\r\n\r\nexport type TimePoint = {\r\n    offset: number\r\n    bpm: number\r\n    bpb: number // beats per bar\r\n    notes: Note[]\r\n} & IdItem\r\n\r\nexport type GameMap = {\r\n    timepoints: TimePoint[]\r\n}\r\n\r\nexport function GameMapToString(map: GameMap) {\r\n    const buffer = [\"\"]\r\n\r\n    for (const tp of map.timepoints) {\r\n        buffer.push(\"\\n+|\", tp.offset.toString(), \"|\", tp.bpm.toString(), \"|\", tp.bpb.toFixed(), \"\\n\\n\")\r\n\r\n        for (const note of tp.notes) {\r\n            if (note.type === \"single\") {\r\n                buffer.push(\"s|\", note.time.toFixed(), \":\", note.lane.toFixed(), \"\\n\")\r\n            } else if (note.type === \"flick\") {\r\n                buffer.push(\"f|\", note.time.toFixed(), \":\", note.lane.toFixed(), \"\\n\")\r\n            } else if (note.type === \"slide\") {\r\n                buffer.push(\"l|\", note.flickend ? \"1\" : \"0\")\r\n                for (const n of note.notes) {\r\n                    buffer.push(\"|\", n.time.toFixed(), \":\", n.lane.toFixed())\r\n                }\r\n                buffer.push(\"\\n\")\r\n            }\r\n        }\r\n    }\r\n\r\n    return buffer.join(\"\")\r\n}\r\n\r\nfunction pi(s: string) {\r\n    const value = parseInt(s)\r\n    if (isNaN(value)) throw new Error(\"Not a number\")\r\n    return value\r\n}\r\nfunction pf(s: string) {\r\n    const value = parseFloat(s)\r\n    if (isNaN(value)) throw new Error(\"Not a number\")\r\n    return value\r\n}\r\n\r\nexport function GameMapFromString(mapstring: string) {\r\n\r\n    const lines = mapstring.split(/\\r?\\n/)\r\n    const gamemap: GameMap = {\r\n        timepoints: []\r\n    }\r\n\r\n    function addTp(items: string[]) {\r\n        gamemap.timepoints.push({\r\n            id: uuid(),\r\n            offset: pf(items[1]),\r\n            bpm: pf(items[2]),\r\n            bpb: pi(items[3]),\r\n            notes: [],\r\n        })\r\n    }\r\n    function addSingle(items: string[]) {\r\n        const tl = items[1].split(\":\").map(it => it.trim())\r\n        findex(gamemap.timepoints, -1).notes.push({\r\n            id: uuid(),\r\n            type: \"single\",\r\n            time: pi(tl[0]),\r\n            lane: pi(tl[1]),\r\n        })\r\n    }\r\n    function addFlick(items: string[]) {\r\n        const tl = items[1].split(\":\").map(it => it.trim())\r\n        findex(gamemap.timepoints, -1).notes.push({\r\n            id: uuid(),\r\n            type: \"flick\",\r\n            time: pi(tl[0]),\r\n            lane: pi(tl[1]),\r\n        })\r\n    }\r\n    function addSlide(items: string[]) {\r\n        const notes: Array<Point & IdItem> = []\r\n        for (let i = 2; i < items.length; i++) {\r\n            const tl = items[i].split(\":\").map(it => it.trim())\r\n            notes.push({\r\n                id: uuid(),\r\n                time: pi(tl[0]),\r\n                lane: pi(tl[1]),\r\n            })\r\n        }\r\n        if (notes.length < 2) throw new Error(\"Not a slide\")\r\n        findex(gamemap.timepoints, -1).notes.push({\r\n            id: uuid(),\r\n            type: \"slide\",\r\n            flickend: items[1] === \"1\",\r\n            notes\r\n        })\r\n    }\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n        const line = lines[i]\r\n        const items = line.split(\"|\").map(it => it.trim()).filter(it => it.length > 0)\r\n        if (items.length < 1) continue\r\n        try {\r\n            switch (items[0]) {\r\n                case \"+\": addTp(items); break\r\n                case \"s\": addSingle(items); break\r\n                case \"f\": addFlick(items); break\r\n                case \"l\": addSlide(items); break\r\n            }\r\n        } catch (error) {\r\n            console.error(`[GameMap] error parsing line ${i}: ${error}`)\r\n        }\r\n    }\r\n\r\n    return gamemap\r\n}\r\n\r\n","\r\n\r\nexport function uuid() {\r\n    return Math.random().toString(36).substring(2, 10)\r\n}\r\n\r\nexport function findex<T>(list: T[], i: number) {\r\n    if (list.length <= 0) return undefined\r\n    if (i >= list.length) return undefined\r\n    if (i < -list.length) return undefined\r\n    if (i < 0) i += list.length\r\n    return list[i]\r\n}\r\n\r\n/**\r\n * return the index of the largest element equal or smaller than target\r\n */\r\nexport function binarySearch(list: (i: number) => number, length: number, target: number, force = false) {\r\n    let l = 0\r\n    let r = length - 1\r\n    if (length <= 0) return -1\r\n    if (target < list(l)) return -1\r\n    if (list(r) <= target) return r\r\n\r\n    if (!force && length < 10) {\r\n        while (list(l) <= target) l++\r\n        return l - 1\r\n    }\r\n\r\n    while (l < r - 1) {\r\n        const m = Math.floor((l + r) / 2)\r\n        const v = list(m)\r\n        if (target < v) r = m\r\n        else if (v < target) l = m\r\n        else return m\r\n    }\r\n    return l\r\n}\r\n\r\nexport function ratio(start: number, end: number, target: number, from: number, to: number) {\r\n    const r = (target - start) / (end - start)\r\n    return (to - from) * r + from\r\n}\r\n","import { ratio, binarySearch, findex } from \"../../core/Utils\"\r\nimport { setByte, colorByte, getByte } from \"../Utils/Utils\"\r\nimport { GameEvent } from \"../Utils/GameEvent\"\r\nimport { DisplayObject, Sprite } from \"pixi.js\"\r\nexport type TimeValuePair = {\r\n    time: number\r\n    value: number\r\n}\r\n\r\nexport type StaticKeyframe = {\r\n    type: \"static\"\r\n} & TimeValuePair\r\n\r\nexport type LinearKeyframe = {\r\n    type: \"linear\"\r\n} & TimeValuePair\r\n\r\nexport type BezierKeyframe = {\r\n    type: \"bezier\"\r\n    ctrl: [number, number, number, number]\r\n    calc?: (t: number) => number\r\n} & TimeValuePair\r\n\r\nexport type Keyframe = StaticKeyframe | LinearKeyframe | BezierKeyframe\r\n\r\nexport type Animation = {\r\n    keyframes: Keyframe[]\r\n    base?: number\r\n    scale?: number\r\n    totaltime: number\r\n    loop?: boolean\r\n    yoyo?: boolean\r\n}\r\n\r\n\r\nfunction bezier(ctrl: [number, number, number, number]) {\r\n    if (ctrl[0] < 0 || ctrl[0] > 1 || ctrl[2] < 0 || ctrl[2] > 1)\r\n        console.warn(\"Unexpected control points of bezier curve\")\r\n    return function (t: number) {\r\n        const t1 = 3 * t * (1 - t) * (1 - t)\r\n        const t2 = 3 * t * t * (1 - t)\r\n        const t3 = t * t * t\r\n        return {\r\n            x: ctrl[0] * t1 + ctrl[2] * t2 + t3,\r\n            y: ctrl[1] * t1 + ctrl[3] * t2 + t3,\r\n        }\r\n    }\r\n}\r\n\r\nfunction CreateBezierCurve(ctrl: [number, number, number, number], precision = 0.1) {\r\n    const points: Array<{ x: number, y: number }> = []\r\n    const calc = bezier(ctrl)\r\n    let t = 0\r\n    while (t < 1) {\r\n        points.push(calc(t))\r\n        t += precision\r\n    }\r\n    points.push(calc(1))\r\n    return function (x: number) {\r\n        if (x < 0) x = 0\r\n        if (x > 1) x = 1\r\n        let i = 1;\r\n        if (x <= 0) return points[0].y;\r\n        if (x >= 1) return findex(points, -1).y\r\n        i = binarySearch(id => points[id].x, points.length, x)\r\n        return ratio(points[i].x, points[i + 1].x, x, points[i].y, points[i + 1].y)\r\n    }\r\n}\r\n\r\nfunction CalcAnimation(anim: Animation, time: number) {\r\n    if (anim.loop || anim.yoyo) {\r\n        const t = Math.floor(time / anim.totaltime)\r\n        time -= anim.totaltime * t\r\n        if (anim.yoyo)\r\n            if (t % 2) time = anim.totaltime - time\r\n    }\r\n    const list = anim.keyframes\r\n    if (list.length === 0) {\r\n        console.warn(\"Empty animation\")\r\n        return 0\r\n    }\r\n    const i = binarySearch(id => list[id].time, list.length, time)\r\n    if (i === list.length - 1) return list[i].value\r\n    if (i === -1) return list[0].value\r\n\r\n    const start = list[i]\r\n    const end = list[i + 1]\r\n    switch (start.type) {\r\n        case \"static\": return start.value\r\n        case \"linear\": return ratio(start.time, end.time, time, start.value, end.value)\r\n        case \"bezier\":\r\n            if (!start.calc) start.calc = CreateBezierCurve(start.ctrl)\r\n            const t = start.calc((time - start.time) / (end.time - start.time))\r\n            return (end.value - start.value) * t + start.value\r\n    }\r\n}\r\n\r\nexport class AnimationManager {\r\n\r\n    constructor(mapper?: (prop: string, value?: number) => void) {\r\n        this.targetPropMapper = mapper\r\n    }\r\n\r\n    currentTime = 0\r\n    targetPropMapper: (prop: string, value?: number) => void\r\n    animations = new Map<string, Animation>()\r\n    onEnd = new GameEvent<[]>()\r\n    paused = false\r\n    /**\r\n     * @param dt in seconds\r\n     */\r\n    update(dt: number) {\r\n        if (this.paused) return\r\n        this.currentTime += dt\r\n        let endcount = 0\r\n        this.animations.forEach((anim, prop) => {\r\n            const origvalue = CalcAnimation(anim, this.currentTime)\r\n            const value = origvalue * (typeof anim.scale === \"number\" ? anim.scale : 1)\r\n                + (typeof anim.base === \"number\" ? anim.base : 0)\r\n            this.targetPropMapper(prop, value)\r\n            if (!anim.loop && !anim.yoyo && this.currentTime >= anim.totaltime) endcount++;\r\n        })\r\n        if (endcount === this.animations.size) {\r\n            if (!this._ended) this.onEnd.emit()\r\n            this._ended = true\r\n        } else {\r\n            this._ended = false\r\n        }\r\n    }\r\n    private _ended = false\r\n\r\n    get ended() {\r\n        return this._ended\r\n    }\r\n}\r\n\r\nexport function CreatePixiTargetPropMapper(obj: DisplayObject) {\r\n    const s = obj as Sprite\r\n    return function (prop: string, value: number) {\r\n        switch (prop) {\r\n            case \"x\":\r\n            case \"y\":\r\n            case \"alpha\":\r\n            case \"rotation\":\r\n            case \"angle\":\r\n                obj[prop] = value\r\n                break\r\n            case \"scale\":\r\n                obj.scale.set(value)\r\n                break\r\n            case \"scalex\":\r\n                obj.scale.x = value\r\n                break\r\n            case \"scaley\":\r\n                obj.scale.y = value\r\n                break\r\n            case \"r\":\r\n            case \"g\":\r\n            case \"b\":\r\n                if (s.isSprite)\r\n                    s.tint = setByte(s.tint, colorByte[prop], value)\r\n        }\r\n    }\r\n}\r\n\r\nexport const keyFramePresets = {\r\n    linear: {\r\n        type: \"linear\",\r\n        time: 0,\r\n        value: 0\r\n    } as Keyframe,\r\n    easeInOUt: {\r\n        type: \"bezier\",\r\n        ctrl: [.42, 0, .58, 1],\r\n        time: 0,\r\n        value: 0,\r\n    } as Keyframe,\r\n    easeIn: {\r\n        type: \"bezier\",\r\n        ctrl: [.42, 0, 1, 1],\r\n        time: 0,\r\n        value: 0,\r\n    } as Keyframe,\r\n    easeOut: {\r\n        type: \"bezier\",\r\n        ctrl: [0, 0, .58, 1],\r\n        time: 0,\r\n        value: 0,\r\n    } as Keyframe,\r\n}\r\n\r\nexport function createSimpleAnimation(from: number, to: number, time: number, keyframe: Keyframe): Animation {\r\n    return {\r\n        keyframes: [keyframe, {\r\n            type: \"linear\",\r\n            time,\r\n            value: 1\r\n        }],\r\n        totaltime: time,\r\n        base: from,\r\n        scale: (to - from),\r\n    }\r\n}\r\n","import { Container } from \"pixi.js\";\r\n\r\n\r\nexport class FixRatioContainer extends Container {\r\n    constructor(initWidth: number, initHeight: number) {\r\n        super();\r\n        this._width = initWidth\r\n        this._height = initHeight\r\n    }\r\n\r\n    private _width: number\r\n    private _height: number\r\n\r\n    get width() { return this._width * this.scale.x }\r\n    set width(v) {\r\n        const p = v / this._width;\r\n        this.scale.set(p, p)\r\n    }\r\n    get height() { return this._height * this.scale.x }\r\n    set height(v) {\r\n        const p = v / this._height;\r\n        this.scale.set(p, p)\r\n    }\r\n\r\n    setInit(width: number, height: number) {\r\n        this._width = width\r\n        this._height = height\r\n    }\r\n\r\n    get ratio() { return this._width / this._height }\r\n\r\n    resize(containerWidth: number, containerHeight: number, cover = false, hori = 0.5, vert = 0.5) {\r\n        const cr = containerWidth / containerHeight\r\n        const r = this.ratio\r\n        if ((cr > r) !== cover) {\r\n            this.height = containerHeight\r\n            this.x = containerWidth * hori - this.width * hori\r\n            this.y = 0\r\n        } else {\r\n            this.width = containerWidth\r\n            this.x = 0\r\n            this.y = containerHeight * vert - this.height * vert\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nconst LoadingBackgroundUrl = 'data:image/png;base64,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'\r\n\r\nexport const LoadingBackground = document.createElement(\"img\")\r\nLoadingBackground.src = LoadingBackgroundUrl\r\n\r\nexport const LoadingMessages = [\r\n    \"Loading...\",\r\n    \"bangbangboom 今天炸了么\",\r\n    \"在加载了\",\r\n    \"???\"\r\n]\r\n\r\n\r\n","import { Texture, Container } from \"pixi.js\";\r\nimport { ParticleEmitter } from \"./ParticleEmitter\";\r\nimport { InfoSprite } from \"./InfoSprite\";\r\nimport { EffectInfo } from \"./InfoType\";\r\n\r\nexport class InfoEffect extends Container {\r\n    constructor(info: EffectInfo, textures: { [name: string]: Texture }) {\r\n        super()\r\n\r\n        if (info.particles instanceof Array) {\r\n            info.particles.forEach(x => {\r\n                const p = new ParticleEmitter(x.textures.map(t => textures[t]), x.option)\r\n                p.currentTime = -x.delay || 0\r\n                this.delaymap.set(p, -x.delay || 0)\r\n                this.addChild(p)\r\n            })\r\n        }\r\n\r\n        if (info.sprites instanceof Array) {\r\n            info.sprites.forEach(x => {\r\n                const s = new InfoSprite(x, textures)\r\n                this.addChild(s)\r\n            })\r\n        }\r\n    }\r\n\r\n    private delaymap = new Map<ParticleEmitter, number>()\r\n\r\n    update = (dt: number) => {\r\n        if (!this.visible) return\r\n        this.children.forEach(x => {\r\n            if (x instanceof InfoSprite || x instanceof ParticleEmitter) {\r\n                x.update(dt)\r\n            }\r\n        })\r\n    }\r\n\r\n    setPosition(x: number, y: number) {\r\n        const s = this.scale\r\n        this.children.forEach(c => {\r\n            if (c instanceof InfoSprite) {\r\n                c.position.set(x / s.x, y / s.y)\r\n            } else if (c instanceof ParticleEmitter) {\r\n                c.offset = { x: x / s.x, y: y / s.y }\r\n            }\r\n        })\r\n    }\r\n\r\n    resetAnim() {\r\n        this.children.forEach(x => {\r\n            if (x instanceof ParticleEmitter) {\r\n                x.currentTime = this.delaymap.get(x)\r\n                x.emitEnded = false\r\n                x.allEnd = false\r\n                x.visible = true\r\n                x.canEmit = true\r\n            } else if (x instanceof InfoSprite) {\r\n                x.resetAnim()\r\n            }\r\n        })\r\n    }\r\n\r\n    stopEmit() {\r\n        this.children.forEach(x => {\r\n            if (x instanceof ParticleEmitter) {\r\n                x.canEmit = false\r\n            } else if (x instanceof InfoSprite) {\r\n                x.visible = false\r\n            }\r\n        })\r\n    }\r\n\r\n    allAnimEnd() {\r\n        return this.children.findIndex(x => {\r\n            if (x instanceof ParticleEmitter) {\r\n                if (x.allEnd) return false\r\n            } else if (x instanceof InfoSprite) {\r\n                if (!x.visible) return false\r\n                if (x.allAnimEnd()) return false\r\n            }\r\n            return true\r\n        }) < 0\r\n    }\r\n}\r\n\r\n","import { NumberSprite } from \"./NumberSprite\"\r\nimport { Texture } from \"pixi.js\"\r\nimport { setPositionInfo, NumberSpriteInfo } from \"./InfoType\"\r\nimport { InfoSprite } from \"./InfoSprite\"\r\nimport { AnimationManager, CreatePixiTargetPropMapper } from \"./Animation\"\r\n\r\nexport class InfoNumberSprite extends NumberSprite {\r\n    constructor(info: NumberSpriteInfo, textures: { [name: string]: Texture }) {\r\n        super([0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map(x => x.toString()).map(x => textures[x]))\r\n        if (info.fontSize !== undefined) this.fontSize = info.fontSize\r\n        if (info.fontTint !== undefined) this.tint = parseInt(info.fontTint.replace(\"#\", \"0x\"))\r\n        if (info.fontPadding !== undefined) this.padding = info.fontPadding\r\n        setPositionInfo(this as any, info.position)\r\n\r\n        this.animation.targetPropMapper = CreatePixiTargetPropMapper(this)\r\n\r\n        if (info.animations instanceof Object) {\r\n            for (const prop in info.animations) {\r\n                this.animation.animations.set(prop, info.animations[prop])\r\n            }\r\n        }\r\n\r\n        if (info.children instanceof Array) {\r\n            info.children.forEach(x => {\r\n                const c = new InfoSprite(x, textures)\r\n                this.addChild(c)\r\n                this.infoSprites.push(c)\r\n            })\r\n        }\r\n    }\r\n\r\n    private infoSprites: InfoSprite[] = []\r\n\r\n    animation = new AnimationManager()\r\n\r\n    update = (dt: number) => {\r\n        if (!this.visible) return\r\n        this.animation.update(dt)\r\n        this.infoSprites.forEach(x => (x as InfoSprite).update(dt))\r\n    }\r\n\r\n    resetAnim() {\r\n        this.animation.currentTime = 0\r\n        this.infoSprites.forEach(x => (x as InfoSprite).resetAnim())\r\n    }\r\n\r\n    allAnimEnd(): boolean {\r\n        return this.animation.ended\r\n            && this.infoSprites.findIndex(x => !(x as InfoSprite).allAnimEnd()) < 0\r\n    }\r\n}\r\n","import { Sprite, Texture, BLEND_MODES } from \"pixi.js\";\r\nimport { AnimationManager, CreatePixiTargetPropMapper } from \"./Animation\";\r\nimport { SpriteInfo, setPositionInfo } from \"./InfoType\";\r\n\r\nexport class InfoSprite extends Sprite {\r\n    constructor(info: SpriteInfo, textures: { [name: string]: Texture }) {\r\n        super(textures[info.texture])\r\n        this.animation.targetPropMapper = CreatePixiTargetPropMapper(this)\r\n\r\n        setPositionInfo(this, info.position)\r\n\r\n        if (info.animations instanceof Object) {\r\n            for (const prop in info.animations) {\r\n                this.animation.animations.set(prop, info.animations[prop])\r\n            }\r\n        }\r\n\r\n        if (info.children instanceof Array) {\r\n            info.children.forEach(x => {\r\n                const c = new InfoSprite(x, textures)\r\n                this.addChild(c)\r\n            })\r\n        }\r\n\r\n        if (info.blend === \"add\") this.blendMode = BLEND_MODES.ADD\r\n        if (info.tint !== undefined)\r\n            this.tint = parseInt(info.tint.replace(\"#\", \"0x\"))\r\n\r\n    }\r\n\r\n    animation = new AnimationManager()\r\n\r\n    update = (dt: number) => {\r\n        if (!this.visible) return\r\n        this.animation.update(dt)\r\n        this.children.forEach(x => (x as InfoSprite).update(dt))\r\n    }\r\n\r\n    resetAnim() {\r\n        this.visible = true\r\n        this.animation.currentTime = 0\r\n        this.children.forEach(x => (x as InfoSprite).resetAnim())\r\n    }\r\n\r\n    allAnimEnd(): boolean {\r\n        return this.animation.ended\r\n            && this.children.findIndex(x => !(x as InfoSprite).allAnimEnd()) < 0\r\n    }\r\n}\r\n\r\n","import { ParticleOption } from \"./ParticleEmitter\"\r\nimport { Animation } from \"../Common/Animation\"\r\nimport { Sprite } from \"pixi.js\"\r\n\r\nexport type PositionInfo = {\r\n    x?: number, y?: number\r\n    width?: number, height?: number\r\n    anchor?: { x: number, y: number } | number\r\n    rotation?: number,\r\n    scale?: { x: number, y: number } | number\r\n}\r\n\r\nexport type SpriteInfo = {\r\n    texture?: string\r\n    position?: PositionInfo\r\n    animations?: {\r\n        [propName: string]: Animation\r\n    }\r\n    children?: SpriteInfo[]\r\n    blend?: \"normal\" | \"add\"\r\n    tint?: string\r\n}\r\n\r\nexport type EffectInfo = {\r\n    particles?: Array<{\r\n        textures: string[]\r\n        option: ParticleOption\r\n        delay?: number\r\n    }>,\r\n    sprites?: SpriteInfo[]\r\n}\r\n\r\nexport type NumberSpriteInfo = {\r\n    fontTint?: string\r\n    fontSize?: number\r\n    fontPadding?: number\r\n    position: PositionInfo\r\n    animations: {\r\n        [propName: string]: Animation\r\n    }\r\n    children?: SpriteInfo[]\r\n}\r\n\r\nexport function setPositionInfo(s: Sprite, pos: PositionInfo) {\r\n    if (!pos) return\r\n    if (pos.x !== undefined) s.x = pos.x\r\n    if (pos.y !== undefined) s.y = pos.y\r\n    if (pos.width !== undefined) s.width = pos.width\r\n    if (pos.height !== undefined) s.height = pos.height\r\n    if (pos.anchor !== undefined) {\r\n        if (typeof pos.anchor === \"number\") s.anchor.set(pos.anchor)\r\n        else s.anchor.set(pos.anchor.x, pos.anchor.y)\r\n    }\r\n    if (pos.rotation !== undefined) s.rotation = pos.rotation\r\n    if (pos.scale !== undefined) {\r\n        if (typeof pos.scale === \"number\") s.scale.set(pos.scale)\r\n        else s.scale.set(pos.scale.x, pos.scale.y)\r\n    }\r\n}\r\n","import { Sprite, Container, Texture, Point, ObservablePoint } from \"pixi.js\";\r\n\r\nclass DigitSprite extends Sprite {\r\n    constructor(public num: number, texture?: Texture) {\r\n        super(texture)\r\n        this.anchor.set(0.5)\r\n    }\r\n}\r\n\r\nclass NumberContentSprite extends Container {\r\n\r\n    private tex: Texture[] = []\r\n    private spritepool: DigitSprite[][] = []\r\n\r\n    charWidth = 0\r\n    charHeight = 0\r\n\r\n    constructor(numberTextures: Texture[]) {\r\n        super()\r\n        this.tex = numberTextures\r\n        this.charWidth = Math.max(...numberTextures.map(x => x.width))\r\n        this.charHeight = Math.max(...numberTextures.map(x => x.height))\r\n    }\r\n\r\n    tint = 0xffffff\r\n    /** the size of max height of number textures */\r\n    fontSize = 36\r\n    padding = 4\r\n\r\n    setValue(num: number) {\r\n        const digits = num.toFixed().split(\"\").map(x => parseInt(x))\r\n        const scale = this.fontSize / this.charHeight\r\n        const dx = this.charWidth * scale + this.padding\r\n        const offx = this.charWidth * scale / 2\r\n        const offy = this.charHeight * scale / 2\r\n        this.children.forEach(x => {\r\n            this.saveDigit(x as DigitSprite)\r\n        })\r\n        this.removeChildren()\r\n        digits.forEach((x, i) => {\r\n            const s = this.getDigit(x)\r\n            s.position.set(offx + dx * i, offy)\r\n            s.scale.set(scale)\r\n            s.tint = this.tint\r\n            this.addChild(s)\r\n        })\r\n    }\r\n\r\n    private getDigit(x: number) {\r\n        let pool = this.spritepool[x]\r\n        if (pool === undefined) {\r\n            pool = []\r\n            this.spritepool[x] = pool\r\n        }\r\n        if (pool.length <= 0) {\r\n            pool.push(new DigitSprite(x, this.tex[x]))\r\n        }\r\n        return pool.pop()\r\n    }\r\n\r\n    private saveDigit(s: DigitSprite) {\r\n        const x = s.num\r\n        let pool = this.spritepool[x]\r\n        if (pool === undefined) {\r\n            pool = []\r\n            this.spritepool[x] = pool\r\n        }\r\n        pool.push(s)\r\n    }\r\n}\r\n\r\n\r\nexport class NumberSprite extends Container {\r\n    private content: NumberContentSprite\r\n    constructor(numberTextures: Texture[]) {\r\n        super()\r\n        this.content = new NumberContentSprite(numberTextures)\r\n        this.addChild(this.content)\r\n        this.anchor = new ObservablePoint(() => {\r\n            this.justifyPos()\r\n        }, undefined)\r\n    }\r\n\r\n    get tint() { return this.content.tint }\r\n    set tint(v) { this.content.tint = v }\r\n    get fontSize() { return this.content.fontSize }\r\n    set fontSize(v) { this.content.fontSize = v }\r\n    get padding() { return this.content.padding }\r\n    set padding(v) { this.content.padding = v }\r\n\r\n    anchor: ObservablePoint\r\n\r\n    setValue(num: number) {\r\n        this.content.setValue(num)\r\n        this.justifyPos()\r\n    }\r\n\r\n    private justifyPos() {\r\n        const scale = this.fontSize / this.content.charHeight\r\n        const width = this.content.children.length * this.content.charWidth * scale + (this.content.children.length - 1) * this.padding\r\n        const height = this.content.charHeight * scale\r\n        this.content.position.set(- width * this.anchor.x, - height * this.anchor.y)\r\n    }\r\n}\r\n","import { setByte } from '../Utils/Utils'\r\nimport { GameEvent } from '../Utils/GameEvent'\r\nimport { Sprite, Texture, BLEND_MODES, Container } from 'pixi.js'\r\n\r\ntype RangeNumber = {\r\n    base: number\r\n    offset: number\r\n} | {\r\n    min: number\r\n    max: number\r\n} | number[] | number\r\n\r\nfunction getRangeValue(n?: RangeNumber) {\r\n    if (n === undefined) return undefined\r\n    if (typeof n === \"number\") return n\r\n    if (n instanceof Array)\r\n        return n[Math.floor(Math.random() * n.length)]\r\n    if (\"max\" in n) return n.min + Math.random() * (n.max - n.min)\r\n    return n.base + (Math.random() * 2 - 1) * n.offset\r\n}\r\n\r\nfunction ratio(start: number, end: number, target: number, from?: number, to?: number) {\r\n    if (to === undefined) return from\r\n    const r = (target - start) / (end - start)\r\n    return (to - from) * r + from\r\n}\r\n\r\ntype ParticlePropertiesOption = {\r\n    size?: RangeNumber\r\n    spin?: RangeNumber\r\n    r?: RangeNumber\r\n    g?: RangeNumber\r\n    b?: RangeNumber\r\n    alpha?: RangeNumber\r\n}\r\n\r\ntype ParticleProperties = {\r\n    [P in keyof ParticlePropertiesOption]: number\r\n}\r\n\r\nexport type ParticleOption = {\r\n    duration: number\r\n    emissionRate: number\r\n    emitRect: {\r\n        x: RangeNumber,\r\n        y: RangeNumber,\r\n    }\r\n\r\n    lifeTime: RangeNumber\r\n    /** facing right is 0, clockwise */\r\n    radian: RangeNumber\r\n    speed: RangeNumber\r\n    gravity?: {\r\n        x: number,\r\n        y: number\r\n    },\r\n    /** 不同半径处的加速度 */\r\n    accelRad?: RangeNumber\r\n    /** 切线加速度 */\r\n    accelTan?: RangeNumber\r\n\r\n    start: ParticlePropertiesOption\r\n    end: ParticlePropertiesOption\r\n\r\n    blend?: \"add\" | \"normal\"\r\n}\r\n\r\nexport class Particle extends Sprite {\r\n    startX = 0\r\n    startY = 0\r\n\r\n    speedX = 0\r\n    speedY = 0\r\n    lifetime = 0\r\n    currentTime = 0\r\n    gravity: { x: number, y: number }\r\n    accelRad = 0\r\n    accelTan = 0\r\n\r\n    start: ParticleProperties\r\n    end: ParticleProperties\r\n\r\n    constructor(texture: Texture) {\r\n        super(texture)\r\n        this.anchor.set(0.5)\r\n    }\r\n\r\n    setOption(option: ParticleOption, offset: { x: number, y: number }) {\r\n        if (option.blend === \"add\")\r\n            this.blendMode = BLEND_MODES.ADD\r\n        const speed = getRangeValue(option.speed)\r\n        const radian = getRangeValue(option.radian)\r\n        this.speedX = speed * Math.cos(radian)\r\n        this.speedY = speed * Math.sin(radian)\r\n        this.lifetime = getRangeValue(option.lifeTime)\r\n        this.gravity = option.gravity\r\n        this.accelRad = getRangeValue(option.accelRad)\r\n        this.accelTan = getRangeValue(option.accelTan)\r\n        this.startX = getRangeValue(option.emitRect.x) + offset.x\r\n        this.startY = getRangeValue(option.emitRect.y) + offset.y\r\n        this.x = this.startX\r\n        this.y = this.startY\r\n        this.start = {\r\n            size: getRangeValue(option.start.size),\r\n            spin: getRangeValue(option.start.spin),\r\n            r: getRangeValue(option.start.r),\r\n            g: getRangeValue(option.start.g),\r\n            b: getRangeValue(option.start.b),\r\n            alpha: getRangeValue(option.start.alpha),\r\n        }\r\n        this.end = {\r\n            size: getRangeValue(option.end.size),\r\n            spin: getRangeValue(option.end.spin),\r\n            r: getRangeValue(option.end.r),\r\n            g: getRangeValue(option.end.g),\r\n            b: getRangeValue(option.end.b),\r\n            alpha: getRangeValue(option.end.alpha),\r\n        }\r\n    }\r\n\r\n    shouldRemove = false\r\n\r\n    // tslint:disable: no-bitwise\r\n    /**\r\n     * \r\n     * @param dt in seconds \r\n     */\r\n    update(dt: number) {\r\n        this.currentTime += dt\r\n        if (this.currentTime > this.lifetime) {\r\n            this.visible = false\r\n            this.shouldRemove = true\r\n            return\r\n        }\r\n        {\r\n            this.x += this.speedX * dt\r\n            this.y += this.speedY * dt\r\n\r\n            let dvx = 0\r\n            let dvy = 0\r\n            if (this.gravity) {\r\n                dvx += this.gravity.x\r\n                dvy += this.gravity.y\r\n            }\r\n            if (this.accelTan) {\r\n                dvx += this.accelTan * this.speedY\r\n                dvy += this.accelTan * -this.speedX\r\n            }\r\n            if (this.accelRad) {\r\n                dvx += this.accelRad * (this.x - this.startX)\r\n                dvy += this.accelRad * (this.y - this.startY)\r\n            }\r\n\r\n            this.speedX += dvx * dt\r\n            this.speedY += dvy * dt\r\n        }\r\n        {\r\n            const setRatio = (prop: keyof ParticleProperties, set: (v: number) => void) => {\r\n                const v = ratio(0, this.lifetime, this.currentTime, this.start[prop], this.end[prop])\r\n                if (v !== undefined) {\r\n                    set(v)\r\n                }\r\n            }\r\n            setRatio(\"size\", v => this.scale.set(v))\r\n            setRatio(\"spin\", v => this.rotation = v)\r\n            setRatio(\"r\", v => this.tint = setByte(this.tint, 2, v))\r\n            setRatio(\"g\", v => this.tint = setByte(this.tint, 1, v))\r\n            setRatio(\"b\", v => this.tint = setByte(this.tint, 0, v))\r\n            setRatio(\"alpha\", v => this.alpha = v)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class ParticleEmitter extends Container {\r\n\r\n    private freeIndexes: number[] = []\r\n\r\n    constructor(private textures: Texture[], public option: ParticleOption) {\r\n        super()\r\n    }\r\n\r\n    offset = { x: 0, y: 0 }\r\n\r\n    private useParticle(index: number) {\r\n        const x = this.children[index] as Particle\r\n        x.visible = true\r\n        x.setOption(this.option, this.offset)\r\n        x.currentTime = 0\r\n        const i = Math.floor(Math.random() * this.textures.length)\r\n        x.texture = this.textures[i]\r\n        return x\r\n    }\r\n\r\n    canEmit = true\r\n\r\n    private destroyed = false\r\n    currentTime = 0\r\n    private counter = 0\r\n    /**\r\n     * \r\n     * @param dt in seconds\r\n     */\r\n    update(dt: number) {\r\n        this.currentTime += dt\r\n        if (this.destroyed || this.currentTime < 0) {\r\n            return\r\n        }\r\n        if (this.currentTime - dt < 0) this.currentTime = 0\r\n\r\n        if (this.canEmit && this.option.duration <= 0 || this.currentTime - dt < this.option.duration) {\r\n            const time = this.option.duration > 0 ? (this.currentTime < this.option.duration ? dt : this.option.duration - this.currentTime + dt) : dt\r\n            this.counter += time * this.option.emissionRate\r\n            while (this.counter > 1) {\r\n                this.counter -= 1\r\n                if (this.freeIndexes.length <= 0) {\r\n                    this.addChild(new Particle(this.textures[0]))\r\n                    this.freeIndexes.push(this.children.length - 1)\r\n                }\r\n                const i = this.freeIndexes.pop()\r\n                this.useParticle(i)\r\n            }\r\n        }\r\n\r\n        let visibleCount = 0\r\n        this.children.forEach((c, i) => {\r\n            const p = c as Particle\r\n            if (!p.visible) return\r\n            p.update(dt)\r\n\r\n            if (p.shouldRemove) {\r\n                p.shouldRemove = false\r\n                p.visible = false\r\n                this.freeIndexes.push(i)\r\n            }\r\n\r\n            if (p.visible) visibleCount++\r\n        })\r\n\r\n        if (!this.canEmit || this.option.duration > 0 && this.currentTime >= this.option.duration) {\r\n            if (!this.emitEnded) this.onEmitEnd.emit()\r\n            this.emitEnded = true\r\n        } else {\r\n            this.emitEnded = false\r\n        }\r\n        if (visibleCount <= 0 && this.emitEnded) {\r\n            if (!this.allEnd) this.onAllEnd.emit()\r\n            this.allEnd = true\r\n        } else {\r\n            this.allEnd = false\r\n        }\r\n    }\r\n\r\n    onEmitEnd = new GameEvent<[]>()\r\n    emitEnded = false\r\n    onAllEnd = new GameEvent<[]>()\r\n    allEnd = false\r\n\r\n    destroy() {\r\n        this.destroyed = true\r\n        this.removeChildren()\r\n    }\r\n}\r\n","import { Geometry, TYPES, AbstractBatchRenderer, Renderer, BatchShaderGenerator, ViewableBuffer, utils, Sprite, Texture, Point, Buffer } from \"pixi.js\"\r\n\r\n// modified from\r\n// https://github.com/pixijs/pixi-projection/\r\n// tslint:disable: no-bitwise\r\n\r\nconst shaderVert = `\r\nprecision highp float;\r\n\r\nattribute vec3 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec4 aColor;\r\nattribute float aTextureId;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nvarying float vTextureId;\r\n\r\nvoid main(void){\r\n    gl_Position.xyw = projectionMatrix * aVertexPosition;\r\n    gl_Position.z = 0.0;\r\n\r\n    vTextureCoord = aTextureCoord;\r\n    vTextureId = aTextureId;\r\n    vColor = aColor;\r\n}`\r\nconst shaderFrag = `\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nvarying float vTextureId;\r\n\r\nuniform sampler2D uSamplers[%count%];\r\n\r\nvoid main(void){\r\n    vec4 color;\r\n    %forloop%;\r\n    gl_FragColor = color * vColor;\r\n}`\r\n\r\nclass Batch2dGeometry extends Geometry {\r\n    _buffer: Buffer\r\n    _indexBuffer: Buffer\r\n\r\n    constructor(_static = false) {\r\n        super()\r\n\r\n        this._buffer = new Buffer(null, _static, false)\r\n\r\n        this._indexBuffer = new Buffer(null, _static, true)\r\n\r\n        this.addAttribute('aVertexPosition', this._buffer, 3, false, TYPES.FLOAT)\r\n            .addAttribute('aTextureCoord', this._buffer, 2, false, TYPES.FLOAT)\r\n            .addAttribute('aColor', this._buffer, 4, true, TYPES.UNSIGNED_BYTE)\r\n            .addAttribute('aTextureId', this._buffer, 1, true, TYPES.FLOAT)\r\n            .addIndex(this._indexBuffer)\r\n    }\r\n}\r\n\r\nclass Batch2dPlugin extends AbstractBatchRenderer {\r\n    constructor(renderer: Renderer) {\r\n        super(renderer)\r\n\r\n        this.shaderGenerator = new BatchShaderGenerator(shaderVert, shaderFrag)\r\n        this.geometryClass = Batch2dGeometry\r\n        this.vertexSize = 7\r\n    }\r\n\r\n    vertexSize: number\r\n\r\n    packInterleavedGeometry(element: any, attributeBuffer: ViewableBuffer, indexBuffer: Uint16Array, aIndex: number, iIndex: number) {\r\n        const {\r\n            uint32View,\r\n            float32View,\r\n        } = attributeBuffer\r\n\r\n        const p = aIndex / this.vertexSize; // float32View.length / 6 / 2\r\n        const uvs = element.uvs\r\n        const indicies = element.indices; // geometry.getIndex().data;// indicies\r\n        const vertexData = element.vertexData\r\n        const vertexData2d = element.vertexData2d\r\n        const textureId = element._texture.baseTexture._id\r\n\r\n        const alpha = Math.min(element.worldAlpha, 1.0)\r\n\r\n        const argb = alpha < 1.0 && element._texture.baseTexture.premultiplyAlpha ? utils.premultiplyTint(element._tintRGB, alpha)\r\n            : element._tintRGB + (alpha * 255 << 24)\r\n\r\n        if (vertexData2d) {\r\n            let j = 0\r\n            for (let i = 0; i < vertexData2d.length; i += 3, j += 2) {\r\n                float32View[aIndex++] = vertexData2d[i]\r\n                float32View[aIndex++] = vertexData2d[i + 1]\r\n                float32View[aIndex++] = vertexData2d[i + 2]\r\n                float32View[aIndex++] = uvs[j]\r\n                float32View[aIndex++] = uvs[j + 1]\r\n                uint32View[aIndex++] = argb\r\n                float32View[aIndex++] = textureId\r\n            }\r\n        } else {\r\n            for (let i = 0; i < vertexData.length; i += 2) {\r\n                float32View[aIndex++] = vertexData[i]\r\n                float32View[aIndex++] = vertexData[i + 1]\r\n                float32View[aIndex++] = 1.0\r\n                float32View[aIndex++] = uvs[i]\r\n                float32View[aIndex++] = uvs[i + 1]\r\n                uint32View[aIndex++] = argb\r\n                float32View[aIndex++] = textureId\r\n            }\r\n        }\r\n\r\n        // tslint:disable-next-line: prefer-for-of\r\n        for (let i = 0; i < indicies.length; i++) {\r\n            indexBuffer[iIndex++] = p + indicies[i]\r\n        }\r\n    }\r\n}\r\n\r\nRenderer.registerPlugin('mybatch2d', Batch2dPlugin as any)\r\n\r\nexport class Sprite2d extends Sprite {\r\n    constructor(texture: Texture) {\r\n        super(texture)\r\n        this.pluginName = 'mybatch2d'\r\n    }\r\n\r\n    vertexData2d: Float32Array = null\r\n\r\n    projection = new Point()\r\n    get projectionX() { return this.projection.x }\r\n    set projectionX(v) { this.projection.x = v }\r\n    get projectionY() { return this.projection.y }\r\n    set projectionY(v) { this.projection.y = v }\r\n\r\n    calculateVertices() {\r\n        const texture = this.texture\r\n\r\n        const self = this as any\r\n        const wid = (this.transform as any)._worldID\r\n        const tuid = (texture as any)._updateID\r\n        if (self._transformID === wid && self._textureID === tuid) {\r\n            return\r\n        }\r\n        // update texture UV here, because base texture can be changed without calling `_onTextureUpdate`\r\n        if (self._textureID !== tuid) {\r\n            self.uvs = (texture as any)._uvs.uvsFloat32\r\n        }\r\n\r\n        self._transformID = wid\r\n        self._textureID = tuid\r\n\r\n        const vertexData = self.vertexData\r\n        const trim = texture.trim\r\n        const orig = texture.orig\r\n        const anchor = self._anchor\r\n\r\n        let w0 = 0\r\n        let w1 = 0\r\n        let h0 = 0\r\n        let h1 = 0\r\n\r\n        if (trim) {\r\n            // if the sprite is trimmed and is not a tilingsprite then we need to add the extra\r\n            // space before transforming the sprite coords.\r\n            w1 = trim.x - (anchor._x * orig.width)\r\n            w0 = w1 + trim.width\r\n\r\n            h1 = trim.y - (anchor._y * orig.height)\r\n            h0 = h1 + trim.height\r\n        } else {\r\n            w1 = -anchor._x * orig.width\r\n            w0 = w1 + orig.width\r\n\r\n            h1 = -anchor._y * orig.height\r\n            h0 = h1 + orig.height\r\n        }\r\n\r\n        if (!this.vertexData2d) {\r\n            this.vertexData2d = new Float32Array(12)\r\n        }\r\n        const vertexData2d = this.vertexData2d\r\n        const px = (this.projectionX || 0) / (w0 - w1)\r\n        const py = (this.projectionY || 0) / (h0 - h1)\r\n\r\n        const wt = this.transform.worldTransform\r\n        const a = wt.a\r\n        const b = wt.b\r\n        const c = wt.c\r\n        const d = wt.d\r\n        const tx = wt.tx\r\n        const ty = wt.ty\r\n        // xy\r\n        vertexData2d[2] = w1 * px + h1 * py + 1\r\n        vertexData2d[0] = (a * w1) + (c * h1) + tx * vertexData2d[2]\r\n        vertexData2d[1] = (d * h1) + (b * w1) + ty * vertexData2d[2]\r\n        vertexData[0] = vertexData2d[0] / vertexData2d[2]\r\n        vertexData[1] = vertexData2d[1] / vertexData2d[2]\r\n        // xy\r\n        vertexData2d[5] = w0 * px + h1 * py + 1\r\n        vertexData2d[3] = (a * w0) + (c * h1) + tx * vertexData2d[5]\r\n        vertexData2d[4] = (d * h1) + (b * w0) + ty * vertexData2d[5]\r\n        vertexData[2] = vertexData2d[3] / vertexData2d[5]\r\n        vertexData[3] = vertexData2d[4] / vertexData2d[5]\r\n        // xy\r\n        vertexData2d[8] = w0 * px + h0 * py + 1\r\n        vertexData2d[6] = (a * w0) + (c * h0) + tx * vertexData2d[8]\r\n        vertexData2d[7] = (d * h0) + (b * w0) + ty * vertexData2d[8]\r\n        vertexData[4] = vertexData2d[6] / vertexData2d[8]\r\n        vertexData[5] = vertexData2d[7] / vertexData2d[8]\r\n        // xy\r\n        vertexData2d[11] = w1 * px + h0 * py + 1\r\n        vertexData2d[9] = (a * w1) + (c * h0) + tx * vertexData2d[11]\r\n        vertexData2d[10] = (d * h0) + (b * w1) + ty * vertexData2d[11]\r\n        vertexData[6] = vertexData2d[9] / vertexData2d[11]\r\n        vertexData[7] = vertexData2d[10] / vertexData2d[11]\r\n\r\n        if (self._roundPixels) {\r\n            for (let i = 0; i < 8; i++) {\r\n                vertexData[i] = Math.round(vertexData[i])\r\n            }\r\n        }\r\n    }\r\n}\r\n","\r\nexport const LayerWidth = 1280\r\nexport const LayerHeight = 720\r\n\r\nexport const CenterX = LayerWidth / 2\r\n\r\nexport const LaneInfY = -5\r\nexport const LaneBottomY = LayerHeight * 0.85\r\n\r\nexport const LaneWidth = 0.12 * LayerWidth\r\n\r\nexport const LaneCenterXs: number[] = []\r\n\r\nfor (let i = -3; i < 4; i++) {\r\n    LaneCenterXs.push(CenterX + i * LaneWidth);\r\n}\r\n\r\nexport const FarLineZ = 20\r\nexport const FarLineY = (LaneBottomY - LaneInfY) / FarLineZ + LaneInfY\r\n\r\n\r\nexport type Judge = \"perfect\" | \"great\" | \"good\" | \"bad\" | \"miss\"\r\n\r\nexport const JudgeOffset = {\r\n    /**\r\n     * single\r\n     * flick (pointer down time)\r\n     * long start\r\n     */\r\n    typeA: (offset: number) => {\r\n        const off = offset * 1000\r\n        if (off < -200) return undefined\r\n        if (off < -150 || off > 150) return \"miss\"\r\n        if (off < -125 || off > 125) return \"bad\"\r\n        if (off < -100 || off > 100) return \"good\"\r\n        if (off < -50 || off > 50) return \"great\"\r\n        return \"perfect\"\r\n    },\r\n    /**\r\n     * long end\r\n     * long end flick (point move out time)\r\n     */\r\n    typeB: (offset: number) => {\r\n        const off = offset * 1000\r\n        if (off < -200) return undefined\r\n        if (off < -170 || off > 170) return \"miss\"\r\n        if (off < -150 || off > 150) return \"bad\"\r\n        if (off < -120 || off > 120) return \"good\"\r\n        if (off < -70 || off > 70) return \"great\"\r\n        return \"perfect\"\r\n    },\r\n    /**\r\n     * slide start\r\n     * slide end\r\n     */\r\n    typeC: (offset: number) => {\r\n        const off = offset * 1000\r\n        if (off < -200) return undefined\r\n        if (off < -150 || off > 200) return \"miss\"\r\n        if (off < -125) return \"bad\"\r\n        if (off < -100) return \"good\"\r\n        if (off < -50) return \"great\"\r\n        return \"perfect\"\r\n    },\r\n    /**\r\n     * slide end flick (pointer move out time)\r\n     */\r\n    typeD: (offset: number) => {\r\n        const off = offset * 1000\r\n        if (off < 0) return undefined\r\n        if (off > 100) return \"miss\"\r\n        return \"perfect\"\r\n    },\r\n    /**\r\n     * slide among\r\n     */\r\n    typeE: (offset: number) => {\r\n        const off = offset * 1000\r\n        if (off < 0) return undefined\r\n        if (off > 200) return \"miss\"\r\n        return \"perfect\"\r\n    },\r\n    flickOutTime: 0.1,\r\n    flickOutDis: 40\r\n}\r\n","\r\nexport class GameConfig {\r\n    judgeOffset = 0\r\n    visualOffset = 0\r\n    speed = 10\r\n    resolution = 2\r\n    noteScale = 1\r\n    barOpacity = 0.7\r\n    backgroundDim = 0.7\r\n    effectVolume = 1\r\n    showSimLine = true\r\n    laneEffect = true\r\n    mirror = false\r\n    beatNote = true\r\n    autoplay = false\r\n    // showTapOffset = true\r\n\r\n    debug?: boolean = false\r\n}\r\n\r\nexport class GameLoadConfig {\r\n    musicSrc = \"\"\r\n    mapSrc = \"\"\r\n    backgroundSrc = \"\"\r\n    skin = \"\"\r\n    songName = \"\"\r\n    loadingMessages?: string[]\r\n}\r\n\r\nexport const jsonNames = {\r\n    effect: \"effect.json\",\r\n    game: \"game.json\",\r\n    ui: \"ui.json\",\r\n}\r\n\r\nexport const soundNames = {\r\n    flick: \"flick.mp3\",\r\n    button: \"game_button.mp3\",\r\n    good: \"good.mp3\",\r\n    great: \"great.mp3\",\r\n    long: \"long.mp3\",\r\n    perfect: \"perfect.mp3\",\r\n}\r\n\r\n\r\nexport function staytime(speed: number) {\r\n    return 5.5 - (speed - 1) / 2\r\n}\r\n\r\n","\r\nimport * as Core from '../../core/MapCore'\r\nimport { findex } from '../../core/Utils'\r\nimport { Judge } from './Constants'\r\n\r\n\r\nexport type JudgePoint = {\r\n    /** real time from music start */\r\n    time: number\r\n    /** the first on the left is 0 */\r\n    lane: number\r\n\r\n    // judgeType?: {\r\n    //     canDown: () => boolean\r\n    //     canUp: () => boolean\r\n    // }\r\n    judge?: Judge\r\n}\r\n\r\nexport type Single = {\r\n    type: \"single\"\r\n    onbeat: boolean\r\n} & JudgePoint\r\n\r\nexport type Flick = {\r\n    type: \"flick\"\r\n    pointerId?: number\r\n} & JudgePoint\r\n\r\nexport type Slide = {\r\n    type: \"slide\"\r\n    flickend: boolean\r\n    long?: boolean\r\n    nextJudgeIndex?: number\r\n    pointerId?: number\r\n    notes: Array<SlideStart | SlideAmong | SlideEnd | SlideFlickEnd>\r\n}\r\n\r\nexport type SlideStart = {\r\n    type: \"slidestart\"\r\n    parent: Slide\r\n} & JudgePoint\r\n\r\nexport type SlideAmong = {\r\n    type: \"slideamong\"\r\n    parent: Slide\r\n} & JudgePoint\r\n\r\nexport type SlideEnd = {\r\n    type: \"slideend\"\r\n    parent: Slide\r\n} & JudgePoint\r\n\r\nexport type SlideFlickEnd = {\r\n    type: \"flickend\"\r\n    parent: Slide\r\n} & JudgePoint\r\n\r\nexport type SimLine = {\r\n    type: \"simline\"\r\n    left: JudgePoint\r\n    right: JudgePoint\r\n}\r\n\r\nexport type SlideBar = {\r\n    type: \"slidebar\"\r\n    start: SlideStart | SlideAmong\r\n    end: SlideAmong | SlideEnd | SlideFlickEnd\r\n}\r\n\r\nexport type MainNote = Single | Flick | SlideStart | SlideEnd | SlideFlickEnd\r\n\r\nexport type Note = MainNote | SlideAmong\r\n\r\nexport type GameMap = {\r\n    notes: Note[]\r\n    bars: SlideBar[]\r\n    simlines: SimLine[]\r\n    combo: number\r\n}\r\n\r\nexport function FromMapCore(map: Core.GameMap): GameMap {\r\n    const notes: Note[] = []\r\n    const bars: SlideBar[] = []\r\n    let combo = 0\r\n    for (const tp of map.timepoints) {\r\n        const dt = 60 / tp.bpm / 24\r\n        const off = tp.offset\r\n        const realtime = (time: number) => off + dt * time\r\n        for (const n of tp.notes) {\r\n            switch (n.type) {\r\n                case \"single\":\r\n                    notes.push({ type: \"single\", time: realtime(n.time), lane: n.lane, onbeat: n.time % 24 === 0 })\r\n                    combo++\r\n                    break\r\n                case \"flick\":\r\n                    notes.push({ type: \"flick\", time: realtime(n.time), lane: n.lane })\r\n                    combo++\r\n                    break\r\n                case \"slide\":\r\n                    const slide: Slide = {\r\n                        type: \"slide\", flickend: n.flickend,\r\n                        notes: []\r\n                    }\r\n                    notes.push({\r\n                        type: \"slidestart\", parent: slide,\r\n                        time: realtime(n.notes[0].time), lane: n.notes[0].lane,\r\n                    })\r\n                    slide.notes.push(findex(notes, -1) as SlideStart)\r\n                    combo++\r\n                    for (let i = 1; i < n.notes.length - 1; i++) {\r\n                        notes.push({\r\n                            type: \"slideamong\", parent: slide,\r\n                            time: realtime(n.notes[i].time), lane: n.notes[i].lane\r\n                        })\r\n                        slide.notes.push(findex(notes, -1) as SlideAmong)\r\n                        bars.push({\r\n                            type: \"slidebar\",\r\n                            start: findex(notes, -2) as SlideStart, end: findex(notes, -1) as SlideAmong\r\n                        })\r\n                        combo++\r\n                    }\r\n                    const end = findex(n.notes, -1)\r\n                    notes.push({\r\n                        type: n.flickend ? \"flickend\" : \"slideend\", parent: slide,\r\n                        time: realtime(end.time), lane: end.lane\r\n                    } as SlideFlickEnd)\r\n                    slide.notes.push(findex(notes, -1) as SlideEnd)\r\n                    bars.push({\r\n                        type: \"slidebar\",\r\n                        start: findex(notes, -2) as SlideAmong, end: findex(notes, -1) as SlideEnd\r\n                    })\r\n                    combo++\r\n                    if (n.notes.length === 2 && n.notes[0].lane === n.notes[1].lane)\r\n                        slide.long = true\r\n            }\r\n        }\r\n    }\r\n    notes.sort((a, b) => {\r\n        const dt = a.time - b.time\r\n        if (dt) return dt\r\n        return a.lane - b.lane\r\n    })\r\n    bars.sort((a, b) => {\r\n        const dt = a.start.time - b.start.time\r\n        if (dt) return dt\r\n        return a.start.lane - b.start.lane\r\n    })\r\n\r\n    const timemap = new Map<number, MainNote>()\r\n    const simlines: SimLine[] = []\r\n    for (const n of notes) {\r\n        switch (n.type) {\r\n            case \"single\": case \"flick\": case \"slidestart\": case \"slideend\": case \"flickend\":\r\n                const s = timemap.get(n.time)\r\n                if (s) {\r\n                    simlines.push({ type: \"simline\", left: s, right: n })\r\n                }\r\n                timemap.set(n.time, n)\r\n        }\r\n    }\r\n\r\n    simlines.sort((a, b) => {\r\n        return a.left.time - b.left.time\r\n    })\r\n\r\n    return { notes, combo, bars, simlines }\r\n}\r\n\r\nexport function FromString(str: string, mirror = false) {\r\n    const map = FromMapCore(Core.GameMapFromString(str))\r\n    if (mirror) {\r\n        map.notes.forEach(x => x.lane = 6 - x.lane)\r\n    }\r\n    return map\r\n}\r\n\r\n","import { GameMap, FromString, Note } from \"./GameMap\";\r\nimport { injectable } from \"inversify\";\r\nimport { Resources } from \"../Utils/SymbolClasses\";\r\nimport { GameEvent } from \"../Utils/GameEvent\";\r\nimport { Judge } from \"./Constants\";\r\nimport { GameConfig } from \"./GameConfig\";\r\n\r\nconst scoremap = {\r\n    perfect: 2000,\r\n    great: 1000,\r\n    good: 600,\r\n    bad: 300,\r\n    miss: 0\r\n}\r\n\r\nexport type PointerEventInfo = { pointerId: number, time: number, lane: number, type: \"down\" | \"up\" | \"move\", x: number, y: number }\r\n\r\n@injectable()\r\nexport class GameState {\r\n    constructor(resources: Resources, config: GameConfig) {\r\n        this.map = FromString(resources.map.data, config.mirror)\r\n        this.musicTime = Math.min(-1, this.map.notes[0].time - 5)\r\n        this.maxScore = (scoremap.perfect + 1 + scoremap.perfect + this.map.combo) * this.map.combo / 2\r\n\r\n        this.onJudge.add((note) => {\r\n            if (this.ended) return \"remove\"\r\n            this.addJudge(note.judge)\r\n        })\r\n\r\n        this.onEnd.add(() => {\r\n            this._ended = true\r\n            this.onMusicTimeUpdate.clear()\r\n            this.onPause.clear()\r\n            this.onContinue.clear()\r\n            this.onJudge.clear()\r\n            this.onPointer.clear()\r\n        })\r\n        this.onPause.add(() => { this._paused = true })\r\n        this.onContinue.add(() => { this._paused = false })\r\n    }\r\n\r\n    map: GameMap\r\n\r\n    musicTime: number\r\n\r\n    maxCombo = 0\r\n    currentCombo = 0\r\n\r\n    perfect = 0\r\n    great = 0\r\n    good = 0\r\n    bad = 0\r\n    miss = 0\r\n\r\n    get paused() { return this._paused }\r\n    get ended() { return this._ended }\r\n    get score() { return Math.floor(this.currentScore * 1000000 / this.maxScore) }\r\n\r\n    onMusicTimeUpdate = new GameEvent<[{ musicTime: number, visualTime: number, judgeTime: number }]>()\r\n    onPointer = new GameEvent<[PointerEventInfo]>()\r\n    onJudge = new GameEvent<[Note]>()\r\n    onEmptyTap = new GameEvent<[number]>()\r\n    onPause = new GameEvent<[]>()\r\n    onContinue = new GameEvent<[]>()\r\n    onFullCombo = new GameEvent<[]>()\r\n    onEnd = new GameEvent<[]>()\r\n    onRestart = new GameEvent<[]>()\r\n    onAbort = new GameEvent<[]>()\r\n\r\n    GetMusicTime = () => 0\r\n\r\n    // -------------- private field ----------\r\n\r\n    private maxScore = 0\r\n    private currentScore = 0\r\n    private _ended = false\r\n    private _paused = false\r\n    private judged = 0\r\n    private bonus = 0\r\n\r\n    private addJudge(j: Judge) {\r\n        if (j === \"perfect\" || j === \"great\") {\r\n            this.currentCombo++\r\n            if (this.maxCombo < this.currentCombo)\r\n                this.maxCombo = this.currentCombo\r\n            if (this.currentCombo === this.map.combo)\r\n                this.onFullCombo.emit()\r\n        } else {\r\n            this.currentCombo = 0\r\n        }\r\n        this.currentScore += scoremap[j] + this.currentCombo\r\n        this[j]++\r\n        this.judged++\r\n        // if (this.judged === this.map.combo)\r\n        //     this.onEnd.emit()\r\n    }\r\n}\r\n\r\n","import { injectable } from \"inversify\";\r\nimport { AbsctractJudgeManager } from \"./JudgeManager\";\r\nimport { GameState } from \"./GameState\";\r\n\r\n@injectable()\r\nexport class AutoJudgeManager extends AbsctractJudgeManager {\r\n    constructor(state: GameState) {\r\n        super()\r\n\r\n        let nextJudgeIndex = 0\r\n\r\n        const list = state.map.notes\r\n\r\n        const interval = setInterval(() => {\r\n            if (state.paused) return\r\n            if (state.ended) {\r\n                clearInterval(interval)\r\n            }\r\n\r\n            const time = state.GetMusicTime()\r\n            let i = nextJudgeIndex\r\n            while (i < list.length && list[i].time < time) {\r\n                const note = list[i]\r\n                note.judge = \"perfect\"\r\n                if (note.type === \"slidestart\") {\r\n                    note.parent.pointerId = 1\r\n                    note.parent.nextJudgeIndex = 1\r\n                } else if (note.type === \"slideamong\") {\r\n                    note.parent.nextJudgeIndex++\r\n                } else if (note.type === \"slideend\" || note.type === \"flickend\") {\r\n                    note.parent.pointerId = 0\r\n                }\r\n                state.onJudge.emit(note)\r\n                i++\r\n            }\r\n            nextJudgeIndex = i\r\n        })\r\n    }\r\n}\r\n\r\n","import { injectable } from \"inversify\";\r\nimport { GameState, PointerEventInfo } from \"./GameState\";\r\nimport { Note, Slide, Flick, SlideAmong, SlideFlickEnd, SlideEnd, SlideStart } from \"./GameMap\";\r\nimport { GameConfig } from \"./GameConfig\";\r\nimport { JudgeOffset, Judge } from \"./Constants\";\r\nimport { findex } from \"../../core/Utils\";\r\n\r\nexport abstract class AbsctractJudgeManager { }\r\n\r\nfunction getJudgeFunction(note: Note) {\r\n    if (note.type === \"single\") return JudgeOffset.typeA\r\n    if (note.type === \"flick\") return JudgeOffset.typeA\r\n    if (note.type === \"slidestart\") {\r\n        if (note.parent.long) return JudgeOffset.typeA\r\n        return JudgeOffset.typeC\r\n    }\r\n    if (note.type === \"slideamong\") {\r\n        if (!note.parent.pointerId) return JudgeOffset.typeC\r\n        return JudgeOffset.typeE\r\n    }\r\n    if (note.type === \"slideend\") {\r\n        if (!note.parent.pointerId) return JudgeOffset.typeA\r\n        if (note.parent.long) return JudgeOffset.typeB\r\n        return JudgeOffset.typeC\r\n    }\r\n    if (note.type === \"flickend\") {\r\n        if (!note.parent.pointerId) return JudgeOffset.typeA\r\n    }\r\n    return JudgeOffset.typeD\r\n}\r\n\r\nfunction slideNowJudge(note: SlideStart | SlideAmong | SlideEnd | SlideFlickEnd) {\r\n    const i = note.parent.nextJudgeIndex || 0\r\n    return note.parent.notes[i] === note\r\n}\r\n\r\nfunction distance2(p1: PointerEventInfo, p2: PointerEventInfo) {\r\n    const dx = p1.x - p2.x\r\n    const dy = p1.y - p2.y\r\n    return dx * dx + dy * dy\r\n}\r\n\r\n@injectable()\r\nexport class JudgeManager extends AbsctractJudgeManager {\r\n    constructor(state: GameState, config: GameConfig) {\r\n        super()\r\n\r\n        const list = state.map.notes\r\n\r\n        let pool: Note[] = []\r\n\r\n        const holdingSlides = new Map<number, {\r\n            track: PointerEventInfo[],\r\n            slide: Slide\r\n        }>()\r\n        const holdingFlicks = new Map<number, {\r\n            note: Flick | SlideFlickEnd,\r\n            start: PointerEventInfo\r\n        }>()\r\n\r\n        let nextJudgeIndex = 0\r\n\r\n        let lastMusicTime = 0\r\n\r\n        // --------------------------------------- Interval Judges ---------------------------------------\r\n\r\n        const interval = setInterval(() => {\r\n            if (state.paused) return\r\n            if (state.ended) {\r\n                clearInterval(interval)\r\n            }\r\n\r\n            const mt = state.GetMusicTime() + config.judgeOffset / 1000\r\n\r\n            let i = nextJudgeIndex\r\n            while (i < list.length && list[i].time <= mt + 0.3) {\r\n                if (!list[i].judge)\r\n                    pool.push(list[i])\r\n                i++\r\n            }\r\n            nextJudgeIndex = i\r\n\r\n            const removeList: Note[] = []\r\n            const ableToMiss = pool.filter(x => mt - x.time >= 0.1)\r\n            ableToMiss.forEach(x => {\r\n                const j = getJudgeFunction(x)(mt - x.time)\r\n                if (j === \"miss\") {\r\n                    x.judge = j\r\n\r\n                    if (x.type === \"slidestart\") {\r\n                        x.parent.nextJudgeIndex = 1\r\n                    } else if (x.type !== \"single\" && x.type !== \"flick\") {\r\n                        x.parent.nextJudgeIndex++\r\n                        if (x.type !== \"slideamong\") {\r\n                            holdingSlides.delete(x.parent.pointerId)\r\n                            holdingFlicks.delete(x.parent.pointerId)\r\n                            x.parent.pointerId = undefined\r\n                        }\r\n                    } else if (x.type === \"flick\") {\r\n                        holdingFlicks.delete(x.pointerId)\r\n                        x.pointerId = undefined\r\n                    }\r\n\r\n                    state.onJudge.emit(x)\r\n                    removeList.push(x)\r\n                }\r\n            })\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            const slideAmongs = pool.filter(x => x.type === \"slideamong\" && x.parent.pointerId && slideNowJudge(x))\r\n            slideAmongs.forEach(x => {\r\n                const s = x as SlideAmong\r\n                const j = getJudgeFunction(s)(mt - s.time)\r\n                if (j === \"perfect\") { // this only indicates we can judge it now\r\n                    const p = s.parent\r\n                    const info = holdingSlides.get(p.pointerId)\r\n                    if (info) {\r\n                        if (Math.abs(findex(info.track, -1).lane - s.lane) <= 1) { // todo: care about this\r\n                            s.judge = j\r\n                            p.nextJudgeIndex++\r\n                            state.onJudge.emit(s)\r\n                            removeList.push(x)\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            const hodingfs: Array<{ note: Flick | SlideFlickEnd, start: PointerEventInfo }> = []\r\n            holdingFlicks.forEach(x => hodingfs.push(x))\r\n            hodingfs.forEach(x => {\r\n                const jt = x.note.type === \"flick\" ? x.start.time : x.note.time\r\n                if (mt - jt > JudgeOffset.flickOutTime) {\r\n                    x.note.judge = \"miss\"\r\n                    if (x.note.type === \"flickend\") {\r\n                        holdingSlides.delete(x.note.parent.pointerId)\r\n                        x.note.parent.pointerId = undefined\r\n                        x.note.parent.nextJudgeIndex++\r\n                    }\r\n                    holdingFlicks.delete(x.start.pointerId)\r\n                    state.onJudge.emit(x.note)\r\n                    removeList.push(x.note)\r\n                }\r\n            })\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            const flickEnd = pool.filter(x => x.type === \"flickend\" && !x.parent.long && x.parent.pointerId)\r\n            flickEnd.forEach(x => {\r\n                const func = getJudgeFunction(x)\r\n                if (func(mt - x.time) === \"perfect\" && func(lastMusicTime - x.time) === undefined) {\r\n                    const s = x as SlideFlickEnd\r\n                    const start = findex(holdingSlides.get(s.parent.pointerId).track, -1)\r\n                    if (Math.abs(start.lane - s.lane) <= 1) {\r\n                        holdingFlicks.set(s.parent.pointerId, {\r\n                            note: s,\r\n                            start\r\n                        })\r\n                    } else {\r\n                        holdingSlides.delete(s.parent.pointerId)\r\n                        s.parent.pointerId = undefined\r\n                        s.parent.nextJudgeIndex++\r\n                        s.judge = \"miss\"\r\n                        state.onJudge.emit(s)\r\n                        removeList.push(s)\r\n                    }\r\n                }\r\n            })\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            pool.forEach(x => {\r\n                if (\"parent\" in x && x.type !== \"slidestart\") {\r\n                    const index = (x.parent.nextJudgeIndex || 0) + 1\r\n                    if (x.parent.notes[index] === x && mt >= x.time && lastMusicTime < x.time) {\r\n                        const last = x.parent.notes[index - 1]\r\n                        if (last.judge) return\r\n                        last.judge = \"miss\"\r\n                        x.parent.nextJudgeIndex = index\r\n                        state.onJudge.emit(last)\r\n                        removeList.push(last)\r\n                    }\r\n                }\r\n            })\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            lastMusicTime = mt\r\n        })\r\n\r\n        // --------------------------------------- Pointer Events ---------------------------------------\r\n\r\n        state.onPointer.add(pointer => {\r\n            if (state.ended) return \"remove\"\r\n            if (state.paused) return\r\n\r\n            const mt = state.GetMusicTime() + config.judgeOffset / 1000\r\n            pointer.time = mt\r\n\r\n            const comparator = (l: Note, r: Note) => {\r\n                const dt = Math.abs(l.time - mt) - Math.abs(r.time - mt)\r\n                if (dt) return dt\r\n                return Math.abs(l.lane - pointer.lane) - Math.abs(r.lane - pointer.lane)\r\n            }\r\n\r\n            const removeList: Note[] = []\r\n\r\n            let downHandled = false\r\n\r\n            switch (pointer.type) {\r\n                case \"down\": {\r\n                    if (pointer.lane < 0) break\r\n                    let canDown = pool.filter(x => {\r\n                        if (Math.abs(x.lane - pointer.lane) > 1) return false\r\n                        if (\"parent\" in x && !slideNowJudge(x)) return false\r\n                        if (x.type === \"flick\" && x.pointerId) return false\r\n                        if ((x.type === \"slideamong\" || x.type === \"slideend\" || x.type === \"flickend\") && x.parent.pointerId) return false\r\n                        return true\r\n                    })\r\n                    if (canDown.length <= 0) break\r\n                    canDown = canDown.sort(comparator) // can be optimised by heap\r\n                    const n = canDown[0]\r\n                    const j = getJudgeFunction(n)(mt - n.time)\r\n                    if (j !== undefined) {\r\n                        if (n.type !== \"flick\" && n.type !== \"flickend\") {\r\n                            downHandled = true\r\n                            n.judge = j\r\n\r\n                            if (n.type === \"slidestart\" || n.type === \"slideamong\") {\r\n                                n.parent.pointerId = pointer.pointerId\r\n                                if (!n.parent.nextJudgeIndex) n.parent.nextJudgeIndex = 0\r\n                                n.parent.nextJudgeIndex++\r\n                                holdingSlides.set(pointer.pointerId, {\r\n                                    track: [pointer],\r\n                                    slide: n.parent\r\n                                })\r\n                                if (n.type === \"slidestart\" && n.parent.long && n.parent.flickend) {\r\n                                    holdingFlicks.set(pointer.pointerId, {\r\n                                        note: n.parent.notes[1] as SlideFlickEnd,\r\n                                        start: pointer\r\n                                    })\r\n                                }\r\n                            } else if (n.type === \"slideend\") {\r\n                                n.parent.nextJudgeIndex++\r\n                                n.parent.pointerId = undefined\r\n                            }\r\n\r\n                            state.onJudge.emit(n)\r\n                            removeList.push(n)\r\n                        } else {\r\n                            downHandled = true\r\n                            holdingFlicks.set(pointer.pointerId, {\r\n                                note: n,\r\n                                start: pointer\r\n                            })\r\n                            if (n.type === \"flick\") n.pointerId = pointer.pointerId\r\n                        }\r\n                    }\r\n                    break\r\n                }\r\n                case \"up\": {\r\n                    const f = holdingFlicks.get(pointer.pointerId)\r\n                    const s = holdingSlides.get(pointer.pointerId)\r\n                    if (f) {\r\n                        f.note.judge = \"miss\"\r\n                        if (f.note.type === \"flickend\") {\r\n                            f.note.parent.pointerId = undefined\r\n                            f.note.parent.nextJudgeIndex++\r\n                        }\r\n                        removeList.push(f.note)\r\n                        state.onJudge.emit(f.note)\r\n                    } else if (s) {\r\n                        const n = s.slide.notes[s.slide.nextJudgeIndex]\r\n                        if (n) {\r\n                            if (n.type === \"slideamong\" || n.type === \"flickend\") {\r\n                                n.parent.pointerId = undefined\r\n                                n.parent.nextJudgeIndex++\r\n                                n.judge = \"miss\"\r\n                                removeList.push(n)\r\n                                state.onJudge.emit(n)\r\n                            } else if (n.type === \"slideend\") {\r\n                                let j = getJudgeFunction(n)(mt - n.time) as Judge\r\n                                if (j === undefined || Math.abs(pointer.lane - n.lane) > 1) j = \"miss\"\r\n                                n.judge = j\r\n                                n.parent.pointerId = undefined\r\n                                n.parent.nextJudgeIndex++\r\n                                removeList.push(n)\r\n                                state.onJudge.emit(n)\r\n                            }\r\n                        }\r\n                    }\r\n                    holdingSlides.delete(pointer.pointerId)\r\n                    holdingFlicks.delete(pointer.pointerId)\r\n                    break\r\n                }\r\n                case \"move\": {\r\n                    const pointerHis = holdingSlides.get(pointer.pointerId)\r\n                    if (pointerHis) pointerHis.track.push(pointer)\r\n                    const f = holdingFlicks.get(pointer.pointerId)\r\n                    if (f) {\r\n                        if (distance2(f.start, pointer) > JudgeOffset.flickOutDis * JudgeOffset.flickOutDis) {\r\n                            const jt = f.note.type === \"flick\" ? f.start.time : mt\r\n                            const j = getJudgeFunction(f.note)(jt - f.note.time)\r\n                            if (j !== undefined) {\r\n                                if (f.note.type === \"flickend\") {\r\n                                    f.note.parent.pointerId = undefined\r\n                                    f.note.parent.nextJudgeIndex++\r\n                                }\r\n                                f.note.judge = j\r\n                                removeList.push(f.note)\r\n                                state.onJudge.emit(f.note)\r\n                                holdingSlides.delete(pointer.pointerId)\r\n                                holdingFlicks.delete(pointer.pointerId)\r\n                            }\r\n                        }\r\n                    }\r\n                    break\r\n                }\r\n            }\r\n\r\n            if (removeList.length > 0) {\r\n                pool = pool.filter(x => removeList.indexOf(x) < 0)\r\n                removeList.length = 0\r\n            }\r\n\r\n            if (pointer.type === \"down\" && !downHandled) {\r\n                if (pointer.lane !== -1)\r\n                    state.onEmptyTap.emit(pointer.lane)\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n}\r\n\r\n","import { injectable } from \"inversify\";\r\nimport { GameState } from \"./GameState\";\r\nimport { Resources, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { GameConfig } from \"./GameConfig\";\r\nimport { findex } from \"../../core/Utils\";\r\n\r\n@injectable()\r\nexport class MusciManager {\r\n    constructor(state: GameState, resources: Resources, events: GlobalEvents, config: GameConfig) {\r\n        const music = resources.music.data as Howl\r\n        music.stop()\r\n        const musicid = music.play()\r\n        music.pause(musicid)\r\n        music.seek(0, musicid)\r\n\r\n\r\n        let endPadding = Math.max(4 - music.duration() + findex(state.map.notes, -1).time, 0)\r\n\r\n        music.once(\"end\", () => {\r\n            events.Update.add(dt => {\r\n                if (state.ended) return \"remove\"\r\n                if (state.paused) return\r\n                endPadding -= dt\r\n                if (endPadding < 0) {\r\n                    state.onEnd.emit()\r\n                    return \"remove\"\r\n                }\r\n            })\r\n        })\r\n\r\n        let started = false\r\n\r\n        let padding = Math.min(state.musicTime, -1)\r\n\r\n        let lastMt = performance.now()\r\n        let lastTime = performance.now()\r\n\r\n        state.GetMusicTime = () => {\r\n            let mt = music.seek(musicid) as number\r\n            if (mt === lastMt)\r\n                mt += (performance.now() - lastTime) / 1000\r\n            return mt\r\n        }\r\n\r\n        events.Update.add(dt => {\r\n            if (state.ended) return \"remove\"\r\n            if (state.paused) return\r\n\r\n            let mt = 0\r\n            if (!started) {\r\n                padding += dt\r\n                mt = padding\r\n                if (padding >= 0) {\r\n                    started = true\r\n                    music.play(musicid)\r\n                    mt = music.seek(musicid) as number\r\n                }\r\n            } else {\r\n                mt = music.seek(musicid) as number\r\n            }\r\n\r\n            if (lastMt === mt) {\r\n                mt += (performance.now() - lastTime) / 1000\r\n            } else {\r\n                lastMt = mt\r\n                lastTime = performance.now()\r\n            }\r\n\r\n            state.onMusicTimeUpdate.emit({\r\n                musicTime: mt,\r\n                visualTime: mt + config.visualOffset / 1000,\r\n                judgeTime: mt + config.judgeOffset / 1000\r\n            })\r\n        })\r\n\r\n        events.WindowBlur.add(() => {\r\n            state.onPause.emit()\r\n        })\r\n        // events.WindowFocus.add(() => {\r\n        //     state.onContinue.emit()\r\n        // })\r\n\r\n        state.onPause.add(() => {\r\n            music.pause(musicid)\r\n        })\r\n\r\n        state.onContinue.add(() => {\r\n            music.play(musicid)\r\n        })\r\n\r\n        state.onMusicTimeUpdate.add(mt => {\r\n            if (state.onMusicTimeUpdate.prevArgs)\r\n                if (state.onMusicTimeUpdate.prevArgs[0].musicTime === mt.musicTime)\r\n                    console.warn(\"no use music time update:\", mt.musicTime)\r\n        })\r\n\r\n        events.End.add(() => {\r\n            music.stop()\r\n            music.unload()\r\n        })\r\n\r\n    }\r\n}\r\n\r\n","import { CenterX, FarLineZ, LaneInfY, LaneBottomY } from \"./Constants\";\r\nimport { ratio } from \"../../core/Utils\";\r\n\r\n\r\n/**\r\n * fall function\r\n * @param t 0: near, -1: far\r\n * @returns 0 -> 1, ratio of y\r\n */\r\nfunction fall(t: number) {\r\n    return Math.pow(1.1, 50 * t)\r\n}\r\n\r\nconst falllist: number[] = []\r\nfor (let i = 0; i < 100; i++) {\r\n    falllist.push(Math.pow(1.1, i - 50))\r\n}\r\n\r\nfunction fastfall(t: number) {\r\n    const tt = (t + 1) * 50\r\n    let i = Math.floor(tt)\r\n    if (i > 98) i = 98\r\n    else if (i < 0) i = 0\r\n    return ratio(i, i + 1, tt, falllist[i], falllist[i + 1])\r\n}\r\n\r\n/**\r\n * projection\r\n * @param trackpos 0: near, -1: far\r\n * @param laneOffset Lane center x or other\r\n */\r\nexport function projection(trackpos: number, laneOffset: number) {\r\n    // const f = fall(trackpos);\r\n    const f = fastfall(trackpos);\r\n    const r = ((FarLineZ - 1) * f + 1) / FarLineZ\r\n    return {\r\n        x: CenterX + (laneOffset - CenterX) * r,\r\n        y: LaneInfY + (LaneBottomY - LaneInfY) * r,\r\n        scale: r,\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { injectable } from \"inversify\";\r\nimport { Resources, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { GameState } from \"./GameState\";\r\nimport { GameConfig } from \"./GameConfig\";\r\n\r\n@injectable()\r\nexport class SoundManager {\r\n    constructor(resources: Resources, private state: GameState, config: GameConfig, events: GlobalEvents) {\r\n        const sounds = {\r\n            perfect: resources.perfect.data,\r\n            great: resources.great.data,\r\n            good: resources.good.data,\r\n            flick: resources.flick.data,\r\n            long: resources.long.data,\r\n            button: resources.button.data\r\n        }\r\n\r\n        const lastTime: { [prop: string]: number } = {}\r\n        const play = (s: keyof typeof sounds) => {\r\n            const now = performance.now()\r\n            if (lastTime[s] && now - lastTime[s] < 10) return\r\n            lastTime[s] = now\r\n            sounds[s].play()\r\n        }\r\n\r\n        for (const prop in sounds) {\r\n            sounds[(prop as keyof typeof sounds)].volume(config.effectVolume)\r\n        }\r\n\r\n        state.onJudge.add((note) => {\r\n            if (state.ended) return \"remove\"\r\n\r\n            if (note.judge === \"miss\") {\r\n                if (note.type !== \"single\" && note.type !== \"flick\") {\r\n                    //\r\n                }\r\n            } else if (note.judge !== \"bad\") {\r\n                if (note.type === \"flick\" || note.type === \"flickend\") {\r\n                    play(\"flick\")\r\n                } else {\r\n                    play(note.judge as \"perfect\" | \"great\" | \"good\")\r\n                }\r\n            }\r\n        })\r\n\r\n        state.onEmptyTap.add(() => {\r\n            if (state.ended) return \"remove\"\r\n\r\n            play(\"button\")\r\n        })\r\n\r\n        events.End.add(() => {\r\n\r\n            for (const prop in sounds) {\r\n                sounds[(prop as keyof typeof sounds)].unload()\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","import \"reflect-metadata\"\r\nimport { Ticker } from \"./Utils/Ticker\"\r\nimport { GameConfig, GameLoadConfig } from \"./Core/GameConfig\"\r\nimport { Container } from \"inversify\"\r\nimport { GameEvent } from \"./Utils/GameEvent\"\r\nimport { LoadingScene } from \"./Scenes/LoadingScene\"\r\nimport { GlobalEvents, MainStage } from \"./Utils/SymbolClasses\"\r\nimport { addAutoListener } from \"./Utils/Utils\"\r\nimport { SceneSwitcher } from \"./Utils/SceneSwitcher\"\r\nimport { Renderer, autoDetectRenderer, utils } from \"pixi.js\"\r\n\r\ntype Optional<T> = {\r\n    [prop in keyof T]?: T[prop]\r\n}\r\n\r\nexport class Game {\r\n    private readonly renderer: Renderer\r\n    private readonly stage = new MainStage()\r\n    private readonly ticker = new Ticker()\r\n    private readonly ioc = new Container({ skipBaseClassChecks: true })\r\n    private readonly events = new GlobalEvents()\r\n\r\n    constructor(canvas: HTMLCanvasElement, config: Optional<GameConfig>, loadConfig: Optional<GameLoadConfig>) {\r\n\r\n        this.renderer = autoDetectRenderer({\r\n            view: canvas,\r\n            width: canvas.clientWidth,\r\n            height: canvas.clientHeight,\r\n            resolution: config.resolution,\r\n        })\r\n\r\n        this.ioc.bind(Container).toConstantValue(this.ioc)\r\n        this.ioc.bind(MainStage).toConstantValue(this.stage)\r\n        this.ioc.bind(GlobalEvents).toConstantValue(this.events)\r\n\r\n        if (config instanceof GameConfig)\r\n            this.ioc.bind(GameConfig).toConstantValue(config)\r\n        else\r\n            this.ioc.bind(GameConfig).toConstantValue(Object.assign(new GameConfig(), config))\r\n        if (loadConfig instanceof GameLoadConfig)\r\n            this.ioc.bind(GameLoadConfig).toConstantValue(loadConfig)\r\n        else\r\n            this.ioc.bind(GameLoadConfig).toConstantValue(Object.assign(new GameLoadConfig(), loadConfig))\r\n        this.ioc.bind(SceneSwitcher).toSelf().inSingletonScope()\r\n\r\n        this.ticker.Tick.add((delta, now) => {\r\n            this.resize()\r\n            this.events.Update.emit(delta, now)\r\n            this.renderer.render(this.stage)\r\n        })\r\n\r\n        this.resize()\r\n        this.stage.addChild(this.ioc.resolve(LoadingScene))\r\n\r\n        addAutoListener(window, \"blur\", () => {\r\n            if (this._destroyed) return \"remove\"\r\n            this.events.WindowBlur.emit()\r\n            this.ticker.Stop()\r\n        })\r\n\r\n        addAutoListener(window, \"focus\", () => {\r\n            if (this._destroyed) return \"remove\"\r\n            this.ticker.Start()\r\n            this.events.WindowFocus.emit()\r\n        })\r\n\r\n        this.events.End.add(() => {\r\n            if (this._destroyed) return \"remove\"\r\n            this.destroy()\r\n        })\r\n    }\r\n\r\n    start() {\r\n        this.ticker.Start()\r\n    }\r\n\r\n    pause() {\r\n        this.ticker.Stop()\r\n    }\r\n\r\n    private _destroyed = false\r\n\r\n    ondestroyed: () => void\r\n\r\n    destroy() {\r\n        if (this._destroyed) return\r\n        this._destroyed = true\r\n        this.ticker.Stop()\r\n        this.ticker.Tick.clear()\r\n        this.events.End.emit()\r\n        for (const e in this.events) this.events[e as keyof GlobalEvents].clear()\r\n        this.ioc.unbindAll()\r\n        this.stage.destroy()\r\n        this.renderer.clear()\r\n        this.renderer.destroy()\r\n        utils.clearTextureCache()\r\n        if (this.ondestroyed instanceof Function)\r\n            this.ondestroyed()\r\n    }\r\n\r\n    private resize() {\r\n        const h = window.innerHeight\r\n        const w = window.innerWidth\r\n        const s = this.renderer.screen\r\n        if (h !== s.height || w !== s.width || !this.events.Resize.prevArgs) {\r\n            this.renderer.resize(w, h)\r\n            this.events.Resize.emit(w, h)\r\n        }\r\n    }\r\n}\r\n\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { injectable } from \"inversify\";\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\nimport { Resources, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { Sprite } from \"pixi.js\";\r\n\r\n@injectable()\r\nexport class BackgroundLayer extends FixRatioContainer {\r\n    constructor(config: GameConfig, resources: Resources, events: GlobalEvents) {\r\n        super(0, 0)\r\n\r\n        const bg = new Sprite(resources.background.texture)\r\n        bg.alpha = 1 - config.backgroundDim\r\n        this.setInit(bg.width, bg.height)\r\n        {\r\n            const [w, h] = events.Resize.prevArgs\r\n            this.resize(w, h, true)\r\n        }\r\n\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            this.resize(w, h, true)\r\n        })\r\n\r\n        this.addChild(bg)\r\n    }\r\n}\r\n\r\n","import { Sprite } from \"pixi.js\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { Flick, SlideFlickEnd } from \"../../Core/GameMap\";\r\nimport { injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport class FlickNoteSprite extends Sprite {\r\n    constructor(private resource: Resources, private helper: NoteHelper) {\r\n        super()\r\n        this.anchor.set(0.5)\r\n        this.visible = false\r\n\r\n        this.top = new Sprite(resource.game.textures.flick_top)\r\n        this.top.anchor.set(0.5, 1)\r\n\r\n        this.addChild(this.top)\r\n    }\r\n\r\n    private top: Sprite\r\n\r\n    setTexture(lane: number) {\r\n        this.texture = this.resource.game.textures[\"flick_\" + lane]\r\n    }\r\n\r\n    note: Flick | SlideFlickEnd\r\n    shouldRemove = false\r\n\r\n    applyInfo(note: Flick | SlideFlickEnd) {\r\n        this.note = note\r\n        this.setTexture(note.lane)\r\n        this.shouldRemove = false\r\n        this.visible = true\r\n    }\r\n\r\n    update(musicTime: number) {\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        if (this.note.judge || musicTime > this.note.time + 1) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const p = this.helper.calc(this.note, musicTime)\r\n        this.position.set(p.x, p.y)\r\n        this.helper.setScale(this, p.scale)\r\n\r\n        this.top.y = Math.sin(musicTime * 10) * 30 - 30\r\n        this.zIndex = p.scale\r\n    }\r\n}\r\n\r\n","import { Sprite, BLEND_MODES } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { SimLine } from \"../../Core/GameMap\";\r\n\r\n@injectable()\r\nexport class SimLineSprite extends Sprite {\r\n    constructor(resources: Resources, private helper: NoteHelper) {\r\n        super(resources.game.textures.simultaneous_line)\r\n        this.anchor.set(0.5)\r\n        this.visible = false\r\n    }\r\n\r\n    sim: SimLine\r\n    shouldRemove = false\r\n\r\n    applyInfo(sim: SimLine) {\r\n        this.sim = sim\r\n        this.shouldRemove = false\r\n        this.visible = true\r\n    }\r\n\r\n    update(musicTime: number) {\r\n\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        if (this.sim.left.judge || this.sim.right.judge || musicTime > this.sim.left.time + 1) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const lp = this.helper.calc(this.sim.left, musicTime)\r\n        const rp = this.helper.calc(this.sim.right, musicTime)\r\n        this.height = lp.scale * this.texture.height * this.helper.noteScale\r\n        this.width = lp.x - rp.x\r\n\r\n        this.x = (lp.x + rp.x) / 2\r\n        this.y = lp.y\r\n\r\n        this.zIndex = lp.scale\r\n    }\r\n}\r\n\r\n","import { Sprite } from \"pixi.js\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { Flick, SlideFlickEnd, Single } from \"../../Core/GameMap\";\r\nimport { injectable } from \"inversify\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\n\r\n@injectable()\r\nexport class SingleNoteSprite extends Sprite {\r\n    constructor(private resource: Resources, private helper: NoteHelper, private config: GameConfig) {\r\n        super()\r\n        this.anchor.set(0.5)\r\n        this.visible = false\r\n    }\r\n\r\n    setTexture(lane: number) {\r\n        if (!this.note.onbeat && this.config.beatNote)\r\n            this.texture = this.resource.game.textures[\"gray_\" + lane]\r\n        else\r\n            this.texture = this.resource.game.textures[\"single_\" + lane]\r\n    }\r\n\r\n    note: Single\r\n    shouldRemove = false\r\n\r\n    applyInfo(note: Single) {\r\n        this.note = note\r\n        this.setTexture(note.lane)\r\n        this.shouldRemove = false\r\n        this.visible = true\r\n    }\r\n\r\n    update(musicTime: number) {\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        if (this.note.judge || musicTime > this.note.time + 1) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const p = this.helper.calc(this.note, musicTime)\r\n        this.position.set(p.x, p.y)\r\n        this.helper.setScale(this, p.scale)\r\n\r\n        this.zIndex = p.scale\r\n    }\r\n}\r\n\r\n","import { Sprite } from \"pixi.js\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { SlideAmong } from \"../../Core/GameMap\";\r\nimport { injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport class SlideAmongSprite extends Sprite {\r\n    constructor(resource: Resources, private helper: NoteHelper) {\r\n        super(resource.game.textures.slide_among)\r\n        this.anchor.set(0.5)\r\n        this.visible = false\r\n    }\r\n\r\n    note: SlideAmong\r\n    shouldRemove = false\r\n\r\n    applyInfo(note: SlideAmong) {\r\n        this.note = note\r\n        this.shouldRemove = false\r\n        this.visible = true\r\n    }\r\n\r\n    update(musicTime: number) {\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        if (this.note.judge || musicTime > this.note.time + 1) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const p = this.helper.calc(this.note, musicTime)\r\n        this.position.set(p.x, p.y)\r\n        this.helper.setScale(this, p.scale)\r\n\r\n        this.zIndex = p.scale\r\n    }\r\n}\r\n\r\n","import { Sprite2d } from \"../../Common/Sprite2d\";\r\nimport { injectable } from \"inversify\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { SlideBar, SlideStart } from \"../../Core/GameMap\";\r\nimport { ratio } from \"../../../core/Utils\";\r\nimport { LaneCenterXs } from \"../../Core/Constants\";\r\nimport { projection } from \"../../Core/Projection\";\r\nimport { Matrix } from \"pixi.js\";\r\n\r\n@injectable()\r\nexport class SlideBarSprite extends Sprite2d {\r\n    constructor(resources: Resources, private helper: NoteHelper) {\r\n        super(resources.game.textures.slide_bar)\r\n        this.anchor.set(0.5, 1)\r\n        this.visible = false\r\n    }\r\n\r\n    shouldRemove = false\r\n    bar: SlideBar\r\n\r\n    applyInfo(bar: SlideBar) {\r\n        this.bar = bar\r\n        this.visible = true\r\n        this.shouldRemove = false\r\n    }\r\n\r\n\r\n    update(musicTime: number) {\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        let st = this.bar.start.time\r\n        if (st < musicTime && this.bar.start.parent.pointerId) st = musicTime\r\n        let et = this.bar.end.time\r\n        if (et > musicTime + this.helper.staytime) et = musicTime + this.helper.staytime\r\n\r\n        if (this.bar.end.judge || this.bar.start.judge === \"miss\" || st >= et || musicTime > this.bar.end.time + 1\r\n            || (!this.bar.start.parent.pointerId && musicTime > this.bar.start.time + 1)) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const startPos = ratio(this.bar.start.time, this.bar.end.time, st,\r\n            LaneCenterXs[this.bar.start.lane], LaneCenterXs[this.bar.end.lane])\r\n        const startT = (musicTime - st) / this.helper.staytime\r\n        const sp = projection(startT, startPos)\r\n\r\n        const endPos = ratio(this.bar.start.time, this.bar.end.time, et,\r\n            LaneCenterXs[this.bar.start.lane], LaneCenterXs[this.bar.end.lane])\r\n        const endT = (musicTime - et) / this.helper.staytime\r\n        const ep = projection(endT, endPos)\r\n\r\n        const f = sp.scale / ep.scale\r\n\r\n        const sx = this.helper.noteScale * sp.scale / NoteHelper.noteInitScale\r\n        const sy = (sp.y - ep.y) / this.texture.height * f\r\n        this.transform.setFromMatrix(new Matrix(sx, 0,\r\n            (ep.x - sp.x) / (ep.y - sp.y) * sy, sy, sp.x, sp.y))\r\n\r\n        this.projectionY = 1 - f\r\n\r\n        this.zIndex = sp.scale\r\n    }\r\n}\r\n\r\n","import { Sprite } from \"pixi.js\";\r\nimport { Resources, NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { SlideEnd, SlideStart } from \"../../Core/GameMap\";\r\nimport { injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport class SlideNoteSprite extends Sprite {\r\n    constructor(private resource: Resources, private helper: NoteHelper) {\r\n        super()\r\n        this.anchor.set(0.5)\r\n        this.visible = false\r\n    }\r\n\r\n    setTexture(lane: number) {\r\n        this.texture = this.resource.game.textures[\"slide_\" + lane]\r\n    }\r\n\r\n    note: SlideStart | SlideEnd\r\n    shouldRemove = false\r\n\r\n    applyInfo(note: SlideStart | SlideEnd) {\r\n        this.note = note\r\n        this.setTexture(note.lane)\r\n        this.shouldRemove = false\r\n        this.visible = true\r\n    }\r\n\r\n    update(musicTime: number) {\r\n        if (this.visible === false || this.shouldRemove) return\r\n\r\n        if (this.note.judge || musicTime > this.note.time + 1) {\r\n            this.shouldRemove = true\r\n            this.visible = false\r\n            this.zIndex = 0\r\n            return\r\n        }\r\n\r\n        const p = this.helper.calc(this.note, musicTime)\r\n        this.position.set(p.x, p.y)\r\n        this.helper.setScale(this, p.scale)\r\n\r\n        this.zIndex = p.scale\r\n    }\r\n}\r\n\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { LayerWidth, LayerHeight, LaneBottomY, LaneCenterXs, LaneInfY, CenterX, LaneWidth, FarLineY } from \"../Core/Constants\";\r\nimport { injectable } from \"inversify\";\r\nimport { GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { Graphics } from \"pixi.js\";\r\nimport { Container as IOC } from \"inversify\"\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\n\r\n@injectable()\r\nexport class DebugLayer extends FixRatioContainer {\r\n    constructor(\r\n        events: GlobalEvents,\r\n        config: GameConfig\r\n    ) {\r\n        super(LayerWidth, LayerHeight)\r\n        this.visible = config.debug\r\n        this.alpha = 0.2\r\n\r\n        this.resize(...events.Resize.prevArgs)\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            this.resize(w, h)\r\n        })\r\n\r\n        const border = new Graphics()\r\n        border.lineStyle(2, 0xff8800)\r\n        border.moveTo(0, 0).lineTo(0, LayerHeight).lineTo(LayerWidth, LayerHeight).lineTo(LayerWidth, 0).lineTo(0, 0)\r\n        this.addChild(border)\r\n\r\n        const nearFarLines = new Graphics()\r\n        nearFarLines.lineStyle(4, 0x0088ff)\r\n        nearFarLines.moveTo(0, LaneBottomY).lineTo(LayerWidth, LaneBottomY)\r\n        nearFarLines.lineStyle(2, 0x0088ff)\r\n        nearFarLines.moveTo(0, FarLineY).lineTo(LayerWidth, FarLineY)\r\n        this.addChild(nearFarLines)\r\n\r\n        const centerLines = new Graphics()\r\n        centerLines.lineStyle(2, 0x004422)\r\n        LaneCenterXs.forEach(x => {\r\n            centerLines.moveTo(CenterX, LaneInfY).lineTo(x, LaneBottomY)\r\n        })\r\n        this.addChild(centerLines)\r\n\r\n        const borderLines = new Graphics()\r\n        borderLines.lineStyle(2, 0x00aa44)\r\n        const borderXs = LaneCenterXs.map(x => x - LaneWidth / 2)\r\n        borderXs.push(borderXs[borderXs.length - 1] + LaneWidth)\r\n        borderXs.forEach(x => {\r\n            borderLines.moveTo(CenterX, LaneInfY).lineTo(x, LaneBottomY)\r\n        })\r\n        this.addChild(borderLines)\r\n    }\r\n}\r\n\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { LayerWidth, LayerHeight } from \"../Core/Constants\";\r\nimport { injectable, Container as IOC } from \"inversify\";\r\nimport { GameState } from \"../Core/GameState\";\r\nimport { SpriteInfo, NumberSpriteInfo, PositionInfo, setPositionInfo } from \"../Common/InfoType\";\r\nimport { TextStyle, Text } from \"pixi.js\";\r\nimport { GlobalEvents, Resources } from \"../Utils/SymbolClasses\";\r\nimport { InfoSprite } from \"../Common/InfoSprite\";\r\nimport { GameLoadConfig, GameConfig } from \"../Core/GameConfig\";\r\nimport { InfoNumberSprite } from \"../Common/InfoNumberSprite\";\r\nimport { AutoPlayLayer } from \"./Sublayers/AutoPlayLayer\";\r\n\r\ntype FinishLayerInfo = {\r\n    name?: {\r\n        position: PositionInfo\r\n        style: TextStyle\r\n    }\r\n    retry: SpriteInfo\r\n    back: SpriteInfo\r\n\r\n    score: NumberSpriteInfo\r\n    perfect: NumberSpriteInfo\r\n    great: NumberSpriteInfo\r\n    good: NumberSpriteInfo\r\n    bad: NumberSpriteInfo\r\n    miss: NumberSpriteInfo\r\n    combo: NumberSpriteInfo\r\n\r\n    fullcombo: SpriteInfo\r\n\r\n    other?: SpriteInfo[]\r\n}\r\n\r\n@injectable()\r\nexport class FinishLayer extends FixRatioContainer {\r\n    constructor(state: GameState, events: GlobalEvents, resources: Resources, loadcfg: GameLoadConfig, ioc: IOC, config: GameConfig) {\r\n        super(LayerWidth, LayerHeight)\r\n\r\n\r\n        this.resize(...events.Resize.prevArgs)\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            this.resize(w, h)\r\n        })\r\n\r\n        const info = resources.ui.data.info.score as FinishLayerInfo\r\n        const textures = resources.ui.textures\r\n\r\n\r\n        if (info.other instanceof Array) {\r\n            info.other.forEach(x => {\r\n                this.addChild(new InfoSprite(x, textures))\r\n            })\r\n        }\r\n\r\n        const numbers = [\"perfect\", \"great\", \"good\", \"bad\", \"miss\", \"score\", \"combo\"] as [\"perfect\", \"great\", \"good\", \"bad\", \"miss\", \"score\", \"combo\"]\r\n        numbers.forEach(x => {\r\n            const n = new InfoNumberSprite(info[x], textures)\r\n            if (x === \"combo\") n.setValue(state.maxCombo)\r\n            else n.setValue(state[x])\r\n            this.addChild(n)\r\n        })\r\n\r\n        if (state.maxCombo === state.map.combo) {\r\n            this.addChild(new InfoSprite(info.fullcombo, textures))\r\n        }\r\n\r\n        if (info.name) {\r\n            const name = new Text(loadcfg.songName, info.name.style)\r\n            setPositionInfo(name, info.name.position)\r\n            this.addChild(name)\r\n        }\r\n\r\n        const retry = new InfoSprite(info.retry, textures)\r\n        const back = new InfoSprite(info.back, textures)\r\n        retry.interactive = true\r\n        //        retry.buttonMode = true\r\n        back.interactive = true\r\n        //        back.buttonMode = true\r\n\r\n        retry.once(\"pointertap\", () => {\r\n            this.onRetry()\r\n        })\r\n        back.once(\"pointertap\", () => {\r\n            this.onBack()\r\n        })\r\n\r\n        this.addChild(retry, back)\r\n\r\n        events.Update.add(dt => {\r\n            if (!this.parent) return \"remove\"\r\n            this.children.forEach(x => {\r\n                if (x instanceof InfoSprite || x instanceof InfoNumberSprite) {\r\n                    x.update(dt)\r\n                }\r\n            })\r\n        })\r\n\r\n        if (config.autoplay) {\r\n            this.addChild(ioc.resolve(AutoPlayLayer))\r\n        }\r\n    }\r\n\r\n    onRetry = () => { /** */ }\r\n    onBack = () => { /** */ }\r\n}\r\n\r\n\r\n\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { LayerWidth, LayerHeight } from \"../Core/Constants\";\r\nimport { injectable } from \"inversify\";\r\nimport { Container as IOC } from \"inversify\"\r\nimport { GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { LaneLayer } from \"./Sublayers/LaneLayer\";\r\nimport { IntereactionLayer } from \"./Sublayers/IntereactionLayer\";\r\nimport { NotesLayer } from \"./Sublayers/NotesLayer\";\r\nimport { MusciManager } from \"../Core/MusicManager\";\r\nimport { UILayer } from \"./Sublayers/UILayer\";\r\nimport { EffectLayer } from \"./Sublayers/EffectLayer\";\r\nimport { LaneEffectLayer } from \"./Sublayers/LaneEffectLayer\";\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\nimport { AutoPlayLayer } from \"./Sublayers/AutoPlayLayer\";\r\n\r\n@injectable()\r\nexport class GameLayer extends FixRatioContainer {\r\n    constructor(ioc: IOC, events: GlobalEvents, config: GameConfig) {\r\n        super(LayerWidth, LayerHeight)\r\n\r\n        this.resize(...events.Resize.prevArgs)\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            this.resize(w, h)\r\n        })\r\n\r\n        this.addChild(ioc.resolve(LaneLayer))\r\n        this.addChild(ioc.resolve(LaneEffectLayer))\r\n        this.addChild(ioc.resolve(EffectLayer))\r\n        this.addChild(ioc.resolve(NotesLayer))\r\n        this.addChild(ioc.resolve(UILayer))\r\n        this.addChild(ioc.resolve(IntereactionLayer))\r\n\r\n        if (config.autoplay) {\r\n            this.addChild(ioc.resolve(AutoPlayLayer))\r\n        }\r\n    }\r\n}\r\n\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { injectable } from \"inversify\";\r\nimport { LayerWidth, LayerHeight } from \"../Core/Constants\";\r\nimport { Text, Container, TilingSprite, Texture, Graphics } from \"pixi.js\";\r\nimport { LoadingBackground as LoadingBackground, LoadingMessages } from \"../Common/InCodeAssests\";\r\nimport { GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { AnimationManager, CreatePixiTargetPropMapper, createSimpleAnimation, keyFramePresets } from \"../Common/Animation\";\r\nimport { GameEvent } from \"../Utils/GameEvent\";\r\nimport { GameLoadConfig } from \"../Core/GameConfig\";\r\n\r\nclass LoadProgress {\r\n    progress = 0\r\n\r\n    targetProgress = 0\r\n\r\n    set(target: number) {\r\n        this.targetProgress = target\r\n        if (target >= 1) this.finished = true\r\n    }\r\n\r\n    private finished = false\r\n\r\n    /**\r\n     * \r\n     * @param dt 以秒计\r\n     */\r\n    update(dt: number) {\r\n        this.progress += dt * (this.targetProgress - this.progress) * 5\r\n\r\n        if (this.finished) {\r\n            this.progress += dt * 0.1\r\n            if (this.progress > 1) {\r\n                this.progress = 1\r\n                return true\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@injectable()\r\nexport class LoadingLayer extends Container {\r\n\r\n    progress = new LoadProgress()\r\n\r\n    constructor(\r\n        events: GlobalEvents,\r\n        config: GameLoadConfig\r\n    ) {\r\n        super()\r\n\r\n        const backtexture = Texture.from(LoadingBackground)\r\n        const back = new TilingSprite(backtexture, ...events.Resize.prevArgs)\r\n        this.addChild(back)\r\n\r\n        const container = new FixRatioContainer(LayerWidth, LayerHeight)\r\n        container.resize(...events.Resize.prevArgs)\r\n\r\n        const text = new Text(LoadingMessages[0], {\r\n            fontSize: 72,\r\n            fill: \"white\",\r\n        })\r\n        text.position.set(400, 330)\r\n        text.scale.set(0.5)\r\n        container.addChild(text)\r\n\r\n        const barback = new Graphics().beginFill(0x808080).drawRoundedRect(0, 0, 480, 18, 8).endFill()\r\n        barback.position.set(400, 380)\r\n        container.addChild(barback)\r\n\r\n        const bar = new Graphics();\r\n        bar.position.set(400, 380)\r\n        container.addChild(bar)\r\n        this.addChild(container)\r\n\r\n        const textanim = this.setTextAnim(text, events.Update)\r\n\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n\r\n            back.width = w\r\n            back.height = h\r\n\r\n            back.tileScale.set(Math.max(w, h) / 1000)\r\n            container.resize(w, h)\r\n        })\r\n\r\n        let lastProg = 0\r\n        events.Update.add((dt, now) => {\r\n            if (!this.parent) return \"remove\"\r\n\r\n            back.tilePosition.x += dt * 20\r\n            back.tilePosition.y += dt * 10\r\n\r\n            textanim.update(dt)\r\n\r\n            this.progress.update(dt)\r\n            const progress = this.progress.progress\r\n            if (progress > 0.04 && lastProg !== progress) {\r\n                lastProg = progress\r\n                bar.clear().beginFill(0xe93f5f).drawRoundedRect(0, 0, 480 * progress, 18, 8).endFill()\r\n            }\r\n        })\r\n\r\n        this.messages = config.loadingMessages || LoadingMessages\r\n    }\r\n\r\n    private messages: string[]\r\n\r\n    getRandomMessage(prev = \"\") {\r\n        let str = prev\r\n        while (str === prev) {\r\n            const i = Math.floor(Math.random() * this.messages.length)\r\n            str = this.messages[i]\r\n        }\r\n        return str\r\n    }\r\n\r\n\r\n    setTextAnim(text: Text, update: GameEvent<[number, number]>) {\r\n\r\n        let timeout = 5\r\n\r\n        const textanim = new AnimationManager(CreatePixiTargetPropMapper(text))\r\n        textanim.paused = true\r\n\r\n        const anim1 = createSimpleAnimation(1, 0, 0.3, keyFramePresets.easeOut)\r\n        const anim2 = createSimpleAnimation(text.x, text.x - 20, 0.3, keyFramePresets.easeOut)\r\n        const changeText = () => {\r\n            if (!this.parent) return\r\n            textanim.paused = false\r\n            textanim.animations.set(\"alpha\", anim1)\r\n            textanim.animations.set(\"x\", anim2)\r\n            textanim.onEnd.add(changeText2)\r\n        }\r\n        const anim3 = createSimpleAnimation(0, 1, 0.3, keyFramePresets.easeOut)\r\n        const anim4 = createSimpleAnimation(text.x + 20, text.x, 0.3, keyFramePresets.easeOut)\r\n        const changeText2 = () => {\r\n            text.text = this.getRandomMessage(text.text)\r\n            textanim.currentTime = 0\r\n            textanim.animations.set(\"alpha\", anim3)\r\n            textanim.animations.set(\"x\", anim4)\r\n            textanim.onEnd.add(() => {\r\n                textanim.paused = true\r\n                textanim.currentTime = 0\r\n\r\n                timeout = 5\r\n                return \"remove\"\r\n            })\r\n            return \"remove\"\r\n        }\r\n\r\n        update.add(dt => {\r\n            if (!this.parent) return \"remove\"\r\n            timeout -= dt\r\n            if (timeout < 0 && timeout + dt >= 0) changeText()\r\n        })\r\n\r\n        return textanim\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { Container, Graphics, Sprite, Texture } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { SpriteInfo } from \"../Common/InfoType\";\r\nimport { GameState } from \"../Core/GameState\";\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\nimport { Resources, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { InfoSprite } from \"../Common/InfoSprite\";\r\nimport { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { LayerHeight, LayerWidth } from \"../Core/Constants\";\r\n\r\n\r\ntype PauseLayerInfo = {\r\n    continue: SpriteInfo\r\n    restart: SpriteInfo\r\n    back: SpriteInfo\r\n    other?: SpriteInfo[]\r\n}\r\n\r\n@injectable()\r\nexport class PauseLayer extends Container {\r\n    constructor(state: GameState, config: GameConfig, resources: Resources, events: GlobalEvents) {\r\n        super()\r\n\r\n        const mask = new Sprite(Texture.WHITE)\r\n        mask.tint = 0\r\n        mask.alpha = 0.5\r\n\r\n        const container = new FixRatioContainer(LayerWidth, LayerHeight)\r\n\r\n        mask.width = events.Resize.prevArgs[0]\r\n        mask.height = events.Resize.prevArgs[1]\r\n        container.resize(...events.Resize.prevArgs)\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            mask.width = w\r\n            mask.height = h\r\n            container.resize(w, h)\r\n        })\r\n\r\n        mask.interactive = true\r\n        mask.on(\"pointertap\", (e: PointerEvent) => e.stopPropagation())\r\n\r\n        this.addChild(mask)\r\n        this.addChild(container)\r\n\r\n        const info = resources.ui.data.info.pause as PauseLayerInfo\r\n        const textures = resources.ui.textures\r\n\r\n        if (info.other instanceof Array) {\r\n            info.other.forEach(x => {\r\n                this.addChild(new InfoSprite(x, textures))\r\n            })\r\n        }\r\n\r\n        const continuebtn = new InfoSprite(info.continue, textures)\r\n        const restart = new InfoSprite(info.restart, textures)\r\n        const back = new InfoSprite(info.back, textures)\r\n\r\n        continuebtn.interactive = true\r\n        //        continuebtn.buttonMode = true\r\n        continuebtn.on(\"pointertap\", () => {\r\n            state.onContinue.emit()\r\n        })\r\n\r\n        restart.interactive = true\r\n        //        restart.buttonMode = true\r\n        restart.on(\"pointertap\", () => {\r\n            state.onRestart.emit()\r\n        })\r\n\r\n        back.interactive = true\r\n        //        back.buttonMode = true\r\n        back.on(\"pointertap\", () => {\r\n            state.onAbort.emit()\r\n        })\r\n\r\n        container.addChild(continuebtn, restart, back)\r\n\r\n        events.Update.add(dt => {\r\n            if (!this.parent) return \"remove\"\r\n            this.children.forEach(x => {\r\n                if (x instanceof InfoSprite) {\r\n                    x.update(dt)\r\n                }\r\n            })\r\n        })\r\n    }\r\n}\r\n","import { FixRatioContainer } from \"../Common/FixRatioContainer\";\r\nimport { InfoSprite } from \"../Common/InfoSprite\";\r\nimport { PositionInfo, SpriteInfo, setPositionInfo } from \"../Common/InfoType\";\r\nimport { TextStyle, Text, Graphics } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { LayerWidth, LayerHeight } from \"../Core/Constants\";\r\nimport { Resources, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { Container as IOC } from \"inversify\"\r\nimport { GameLoadConfig, GameConfig } from \"../Core/GameConfig\";\r\n\r\ntype ReadyLayerInfo = {\r\n    play: SpriteInfo,\r\n    auto: SpriteInfo,\r\n    name?: {\r\n        position: PositionInfo\r\n        style: TextStyle\r\n    }\r\n    other?: SpriteInfo[]\r\n}\r\n\r\n@injectable()\r\nexport class ReadyLayer extends FixRatioContainer {\r\n    constructor(resources: Resources, loadcfg: GameLoadConfig, events: GlobalEvents) {\r\n        super(LayerWidth, LayerHeight)\r\n\r\n        this.resize(...events.Resize.prevArgs)\r\n        events.Resize.add((w, h) => {\r\n            if (!this.parent) return \"remove\"\r\n            this.resize(w, h)\r\n        })\r\n\r\n        const info = resources.ui.data.info.ready as ReadyLayerInfo\r\n        const textures = resources.ui.textures\r\n\r\n        if (info.other instanceof Array) {\r\n            info.other.forEach(x => {\r\n                this.addChild(new InfoSprite(x, textures))\r\n            })\r\n        }\r\n\r\n        const playbtn = new InfoSprite(info.play, textures)\r\n        this.addChild(playbtn)\r\n        const autobtn = new InfoSprite(info.auto, textures)\r\n        this.addChild(autobtn)\r\n        if (info.name) {\r\n            const name = new Text(loadcfg.songName, info.name.style)\r\n            setPositionInfo(name, info.name.position)\r\n            this.addChild(name)\r\n        }\r\n\r\n        playbtn.interactive = true\r\n        //        playbtn.buttonMode = true\r\n        autobtn.interactive = true\r\n        //        autobtn.buttonMode = true\r\n\r\n        playbtn.once(\"pointertap\", () => this.start())\r\n        autobtn.once(\"pointertap\", () => this.start(true))\r\n\r\n        events.Update.add(dt => {\r\n            if (!this.parent) return \"remove\"\r\n            this.children.forEach(x => {\r\n                if (x instanceof InfoSprite) {\r\n                    x.update(dt)\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    start = (auto = false) => { /** */ }\r\n}\r\n\r\n","import { Container, Text, BLEND_MODES } from \"pixi.js\";\r\nimport { LayerWidth, LayerHeight } from \"../../Core/Constants\";\r\nimport { injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport class AutoPlayLayer extends Container {\r\n    constructor() {\r\n        super()\r\n\r\n        const auto = new Text(\"AUTOPLAY\", {\r\n            fontSize: 52,\r\n            fill: [0xffffff, 0x888888]\r\n        })\r\n\r\n        auto.blendMode = BLEND_MODES.ADD\r\n        auto.alpha = 0.3\r\n        auto.anchor.x = 0.5\r\n        auto.position.set(LayerWidth / 2, LayerHeight / 2)\r\n        this.addChild(auto)\r\n    }\r\n}\r\n","import { Container, ITextureDictionary } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { EffectInfo } from \"../../Common/InfoType\";\r\nimport { Resources, GlobalEvents } from \"../../Utils/SymbolClasses\";\r\nimport { InfoEffect } from \"../../Common/InfoEffect\";\r\nimport { InfoSprite } from \"../../Common/InfoSprite\";\r\nimport { GameState } from \"../../Core/GameState\";\r\nimport { SlideStart, SlideAmong, Slide } from \"../../Core/GameMap\";\r\nimport { ratio, findex } from \"../../../core/Utils\";\r\nimport { LaneCenterXs, LaneBottomY, LayerWidth, LayerHeight } from \"../../Core/Constants\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\n\r\ntype EffectLayerInfo = {\r\n    tap: EffectInfo\r\n    single: EffectInfo\r\n    flick: EffectInfo\r\n    slide: EffectInfo\r\n    fullcombo: EffectInfo\r\n}\r\n\r\nexport class SingleEffectLayer extends Container {\r\n\r\n    constructor(private info: EffectInfo, private textures: ITextureDictionary, private initScale: number) {\r\n        super()\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.children.forEach(x => {\r\n            if (x instanceof InfoEffect) {\r\n                x.update(dt)\r\n                if (x.allAnimEnd())\r\n                    x.visible = false\r\n            }\r\n        })\r\n    }\r\n\r\n    setEffect(x: number, y: number) {\r\n        let e = this.children.find(ef => !ef.visible) as InfoEffect\r\n        if (!e) {\r\n            e = new InfoEffect(this.info, this.textures)\r\n            e.scale.set(this.initScale)\r\n            this.addChild(e)\r\n        }\r\n        e.setPosition(x, y)\r\n        e.resetAnim()\r\n        e.visible = true\r\n    }\r\n\r\n    setTrackedEffect(tracker: () => { x: number, y: number, visible: boolean }) {\r\n        let e = this.children.find(ef => !ef.visible) as InfoEffect\r\n        if (!e) {\r\n            e = new InfoEffect(this.info, this.textures)\r\n            e.scale.set(this.initScale)\r\n            this.addChild(e)\r\n        }\r\n\r\n        const pupdate = e.update\r\n        e.update = dt => {\r\n            if (!e.visible) return\r\n            const t = tracker()\r\n            if (!t.visible) {\r\n                e.update = pupdate\r\n                e.stopEmit()\r\n                return\r\n            }\r\n            e.setPosition(t.x, t.y)\r\n            pupdate.call(e, dt)\r\n        }\r\n        const tr = tracker()\r\n\r\n        e.setPosition(tr.x, tr.y)\r\n        e.resetAnim()\r\n        e.visible = true\r\n    }\r\n}\r\n\r\nfunction GetSlidePos(note: Slide, musicTime: number) {\r\n    const i = note.nextJudgeIndex || 1\r\n    const n1 = note.notes[i - 1]\r\n    const n2 = note.notes[i]\r\n    return ratio(n1.time, n2.time, musicTime,\r\n        LaneCenterXs[n1.lane], LaneCenterXs[n2.lane])\r\n}\r\n\r\n\r\n@injectable()\r\nexport class EffectLayer extends Container {\r\n\r\n\r\n    constructor(resources: Resources, state: GameState, events: GlobalEvents, config: GameConfig) {\r\n        super()\r\n        const info = resources.effect.data.info as EffectLayerInfo\r\n        const textures = resources.effect.textures\r\n\r\n        const tap = new SingleEffectLayer(info.tap, textures, config.noteScale)\r\n        const single = new SingleEffectLayer(info.single, textures, config.noteScale)\r\n        const flick = new SingleEffectLayer(info.flick, textures, config.noteScale)\r\n        const slide = new SingleEffectLayer(info.slide, textures, config.noteScale)\r\n        const fullcombo = new SingleEffectLayer(info.fullcombo, textures, config.noteScale)\r\n\r\n        const slides = new Set<Slide>()\r\n\r\n        state.onJudge.add(n => {\r\n            if (n.judge === \"miss\") {\r\n                if (\"parent\" in n) {\r\n                    slides.delete(n.parent)\r\n                }\r\n                return\r\n            }\r\n            if (n.type === \"flick\" || n.type === \"flickend\") {\r\n                flick.setEffect(LaneCenterXs[n.lane], LaneBottomY)\r\n            } else {\r\n                single.setEffect(LaneCenterXs[n.lane], LaneBottomY)\r\n            }\r\n            if (n.type !== \"single\" && n.type !== \"flick\") {\r\n                if (slides.has(n.parent)) {\r\n                    if (n.type === \"slideend\" || n.type === \"flickend\")\r\n                        slides.delete(n.parent)\r\n                } else {\r\n                    slides.add(n.parent)\r\n                    slide.setTrackedEffect(() => {\r\n                        const p = n.parent\r\n                        const mt = state.onMusicTimeUpdate.prevArgs[0].visualTime\r\n                        const visible = n.parent.nextJudgeIndex < n.parent.notes.length\r\n                            && slides.has(p) && findex(p.notes, -1).time >= mt\r\n                        return {\r\n                            x: visible && GetSlidePos(p, mt) || 0,\r\n                            y: LaneBottomY,\r\n                            visible\r\n                        }\r\n                    })\r\n                }\r\n\r\n            }\r\n        })\r\n\r\n        state.onEmptyTap.add(l => {\r\n            if (0 <= l && l <= 6)\r\n                tap.setEffect(LaneCenterXs[l], LaneBottomY)\r\n        })\r\n\r\n        state.onFullCombo.add(() => {\r\n            fullcombo.setEffect(LayerWidth / 2, LayerHeight / 2)\r\n        })\r\n\r\n        events.Update.add((dt: number) => {\r\n            if (!this.parent) return \"remove\"\r\n            if (state.paused) return\r\n            this.children.forEach(x => {\r\n                if (x instanceof SingleEffectLayer) {\r\n                    x.update(dt)\r\n                }\r\n            })\r\n        })\r\n\r\n        this.addChild(tap, single, flick, slide, fullcombo)\r\n    }\r\n\r\n\r\n}\r\n","import { Container, Graphics, Rectangle, interaction } from \"pixi.js\";\r\nimport { LayerHeight, CenterX, LaneWidth } from \"../../Core/Constants\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\nimport { injectable } from \"inversify\";\r\nimport { GameState } from \"../../Core/GameState\";\r\n\r\n@injectable()\r\nexport class IntereactionLayer extends Container {\r\n    constructor(\r\n        config: GameConfig,\r\n        state: GameState\r\n    ) {\r\n        super()\r\n\r\n        const hw = 3.7 * LaneWidth\r\n        const h = LayerHeight\r\n\r\n        const rect = new Graphics()\r\n        rect.position.set(CenterX, LayerHeight / 2)\r\n        rect.lineStyle(3, 0xff0088)\r\n        rect.moveTo(-hw, 0).lineTo(hw, 0).lineTo(hw, h).lineTo(-hw, h).lineTo(-hw, 0)\r\n\r\n        this.addChild(rect)\r\n\r\n        rect.alpha = config.debug ? 1 : 0\r\n        rect.interactive = true\r\n        //        rect.buttonMode = true\r\n        rect.hitArea = rect.getLocalBounds()\r\n\r\n        const getlane = (x: number, y: number) => {\r\n            if (y < 0) return -1\r\n            const pm = x >= 0 ? 1 : -1\r\n            let dl = (Math.abs(x) + LaneWidth / 2) / LaneWidth\r\n            if (dl >= 4 && dl < 4.2) dl = 3.5\r\n            if (dl > 4) return -1\r\n            return 3 + Math.floor(dl) * pm\r\n        }\r\n\r\n        const typemap: any = {\r\n            pointerup: \"up\",\r\n            pointerdown: \"down\",\r\n            pointerupoutside: \"up\",\r\n            pointermove: \"move\"\r\n        }\r\n\r\n\r\n        const listen = (...events: string[]) => {\r\n            events.forEach(name => rect.on(name, (e: interaction.InteractionEvent) => {\r\n                e.stopPropagation()\r\n\r\n                const type = typemap[name]\r\n                const p = rect.toLocal(e.data.global)\r\n                const pointerId = e.data.pointerId || 0xffffff\r\n\r\n                const ev = {\r\n                    pointerId,\r\n                    time: 0,\r\n                    lane: getlane(p.x, p.y),\r\n                    type,\r\n                    x: p.x,\r\n                    y: p.y\r\n                }\r\n                state.onPointer.emit(ev)\r\n\r\n                if (config.debug && name.indexOf(\"move\") < 0) console.log(name, ev)\r\n            }))\r\n        }\r\n\r\n        listen(\"pointerup\", \"pointerdown\", \"pointerupoutside\", \"pointermove\")\r\n    }\r\n}\r\n\r\n\r\n","import { Container, Sprite, Texture } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { Resources, GlobalEvents } from \"../../Utils/SymbolClasses\";\r\nimport { AnimationManager, CreatePixiTargetPropMapper } from \"../../Common/Animation\";\r\nimport { LaneBottomY, LaneCenterXs } from \"../../Core/Constants\";\r\nimport { GameState } from \"../../Core/GameState\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\n\r\nexport class LaneEffect extends Sprite {\r\n    constructor(texture: Texture, flip = false) {\r\n        super(texture)\r\n        this.anim.targetPropMapper = CreatePixiTargetPropMapper(this)\r\n        this.anim.animations.set(\"scalex\", {\r\n            keyframes: [{ time: 0, value: flip ? -1 : 1, type: \"bezier\", ctrl: [1, 0, 1, 1] },\r\n            { time: 0.25, value: flip ? -0.4 : 0.4, type: \"static\" }],\r\n            totaltime: 0.25\r\n        })\r\n        this.anim.animations.set(\"scaley\", {\r\n            keyframes: [{ time: 0, value: 1, type: \"bezier\", ctrl: [1, 0, 1, 1] },\r\n            { time: 0.25, value: 0.4, type: \"static\" }],\r\n            totaltime: 0.25\r\n        })\r\n        this.anim.animations.set(\"alpha\", {\r\n            keyframes: [{ time: 0, value: 0.8, type: \"bezier\", ctrl: [.42, 0, 1, 1] },\r\n            { time: 0.25, value: 0, type: \"static\" }],\r\n            totaltime: 0.25\r\n        })\r\n        this.anim.onEnd.add(() => {\r\n            this.visible = false\r\n        })\r\n    }\r\n\r\n    private anim = new AnimationManager()\r\n\r\n    setAnim() {\r\n        this.visible = true\r\n        this.anim.currentTime = 0\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.visible) return\r\n        this.anim.update(dt)\r\n    }\r\n}\r\n\r\n@injectable()\r\nexport class LaneEffectLayer extends Container {\r\n    constructor(resources: Resources, state: GameState, events: GlobalEvents, config: GameConfig) {\r\n        super()\r\n\r\n        if (!config.laneEffect) return\r\n\r\n        const list = [0.166, 0.23, 0.36, 0.5]\r\n\r\n        const effects = [0, 1, 2, 3, 4, 5, 6].map(x => {\r\n            const i = (3 - Math.abs(x - 3))\r\n            const e = new LaneEffect(resources.game.textures[\"bg_line\" + i], x > 3)\r\n            e.y = LaneBottomY\r\n            e.x = LaneCenterXs[x]\r\n            e.visible = false\r\n            e.anchor.set(list[i], 1)\r\n            return e\r\n        })\r\n\r\n        this.addChild(...effects)\r\n\r\n        events.Update.add(dt => {\r\n            if (state.ended) return \"remove\"\r\n            if (state.paused) return\r\n            effects.forEach(x => x.update(dt))\r\n        })\r\n\r\n        state.onJudge.add(n => {\r\n            if (n.judge !== \"miss\")\r\n                effects[n.lane].setAnim()\r\n        })\r\n\r\n        state.onEmptyTap.add(l => {\r\n            effects[l].setAnim()\r\n        })\r\n\r\n    }\r\n}\r\n","import { Container, Sprite } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { Resources } from \"../../Utils/SymbolClasses\";\r\nimport { CenterX, LaneBottomY } from \"../../Core/Constants\";\r\n\r\n@injectable()\r\nexport class LaneLayer extends Container {\r\n    constructor(resources: Resources) {\r\n        super()\r\n\r\n        const lane = new Sprite(resources.game.textures.rhythm_line)\r\n        lane.anchor.set(0.5, 1)\r\n        lane.position.set(CenterX, LaneBottomY)\r\n        this.addChild(lane)\r\n\r\n        const line = new Sprite(resources.game.textures.play_line)\r\n        line.anchor.set(0.5)\r\n        line.position.set(CenterX, LaneBottomY)\r\n        this.addChild(line)\r\n\r\n        // this.cacheAsBitmap = true\r\n    }\r\n}\r\n\r\n","import { Container } from \"pixi.js\";\r\nimport { injectable, Container as IOC } from \"inversify\"\r\nimport { GameState } from \"../../Core/GameState\";\r\nimport { NoteHelper } from \"../../Utils/SymbolClasses\";\r\nimport { SlideBarSprite } from \"../Components/SlideBarSprite\";\r\nimport { SimLineSprite } from \"../Components/SimLineSprite\";\r\nimport { SingleNoteSprite } from \"../Components/SingleNoteSprite\";\r\nimport { FlickNoteSprite } from \"../Components/FlickNoteSprite\";\r\nimport { SlideNoteSprite } from \"../Components/SlideNoteSprite\";\r\nimport { SlideAmongSprite } from \"../Components/SlideAmongSprite\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\n\r\n@injectable()\r\nclass BarLayer extends Container {\r\n    constructor(private state: GameState, private helper: NoteHelper, private ioc: IOC) {\r\n        super()\r\n        this.sortableChildren = true\r\n    }\r\n\r\n    private nextBarIndex = 0\r\n\r\n    update(musicTime: number, showTime: number) {\r\n        let index = this.nextBarIndex\r\n        const list = this.state.map.bars\r\n        while (index < list.length && list[index].start.time < showTime) {\r\n            let bar = (this.children as SlideBarSprite[]).find(x => x.shouldRemove)\r\n            if (!bar) {\r\n                bar = this.ioc.resolve(SlideBarSprite)\r\n                bar.applyInfo(list[index])\r\n                this.addChild(bar)\r\n            } else {\r\n                bar.applyInfo(list[index])\r\n            }\r\n            index++\r\n        }\r\n        this.nextBarIndex = index\r\n        this.children.forEach(x => (x as SlideBarSprite).update(musicTime))\r\n\r\n    }\r\n}\r\n\r\n@injectable()\r\nclass SimLineLayer extends Container {\r\n    constructor(private config: GameConfig, private state: GameState, private ioc: IOC) {\r\n        super()\r\n        this.sortableChildren = true\r\n    }\r\n\r\n    private nextSimIndex = 0\r\n\r\n    update(musicTime: number, showTime: number) {\r\n        if (this.config.showSimLine) {\r\n            let index = this.nextSimIndex\r\n            const list = this.state.map.simlines\r\n            while (index < list.length && list[index].left.time < showTime) {\r\n                let sim = (this.children as SimLineSprite[]).find(x => x.shouldRemove)\r\n                if (!sim) {\r\n                    sim = this.ioc.resolve(SimLineSprite)\r\n                    sim.applyInfo(list[index])\r\n                    this.addChild(sim)\r\n                } else {\r\n                    sim.applyInfo(list[index])\r\n                }\r\n                index++\r\n            }\r\n            this.nextSimIndex = index\r\n            this.children.forEach(x => (x as SimLineSprite).update(musicTime))\r\n        }\r\n    }\r\n}\r\n\r\nconst spritemap = {\r\n    single: SingleNoteSprite,\r\n    flick: FlickNoteSprite,\r\n    flickend: FlickNoteSprite,\r\n    slidestart: SlideNoteSprite,\r\n    slideend: SlideNoteSprite,\r\n    slideamong: SlideAmongSprite,\r\n}\r\n\r\n@injectable()\r\nclass NoteLayer extends Container {\r\n    constructor(private state: GameState, private ioc: IOC) {\r\n        super()\r\n        this.sortableChildren = true\r\n    }\r\n\r\n    private nextNoteIndex = 0\r\n    update(musicTime: number, showTime: number) {\r\n        let index = this.nextNoteIndex\r\n        const list = this.state.map.notes\r\n        while (index < list.length && list[index].time < showTime) {\r\n            const n = list[index]\r\n            const spriteType = spritemap[n.type]\r\n            let note = (this.children as noteSprite[]).find(x =>\r\n                x.shouldRemove && x instanceof spriteType)\r\n            if (!note) {\r\n                note = this.ioc.resolve(spriteType as any)\r\n                note.applyInfo(n as any)\r\n                this.addChild(note)\r\n            } else {\r\n                note.applyInfo(n as any)\r\n            }\r\n            index++\r\n        }\r\n        this.nextNoteIndex = index\r\n        this.children.forEach(x => (x as noteSprite).update(musicTime))\r\n    }\r\n}\r\n\r\ntype noteSprite = SingleNoteSprite | FlickNoteSprite | SlideNoteSprite | SlideAmongSprite\r\n\r\n@injectable()\r\nexport class NotesLayer extends Container {\r\n    constructor(private state: GameState, ioc: IOC, private helper: NoteHelper, private config: GameConfig) {\r\n        super()\r\n\r\n        state.onMusicTimeUpdate.add(this.update)\r\n\r\n        this.barLayer = ioc.resolve(BarLayer)\r\n        this.noteLayer = ioc.resolve(NoteLayer)\r\n        this.simLineLayer = ioc.resolve(SimLineLayer)\r\n        this.addChild(this.barLayer)\r\n        this.addChild(this.simLineLayer)\r\n        this.addChild(this.noteLayer)\r\n\r\n        this.barLayer.alpha = config.barOpacity\r\n    }\r\n\r\n    private barLayer: BarLayer\r\n    private simLineLayer: SimLineLayer\r\n    private noteLayer: NoteLayer\r\n\r\n    update = (musicTime: { musicTime: number, visualTime: number, judgeTime: number, }) => {\r\n        if (this.state.ended) return \"remove\"\r\n\r\n        const time = this.helper.staytime + musicTime.visualTime\r\n\r\n        this.barLayer.update(musicTime.visualTime, time)\r\n        this.simLineLayer.update(musicTime.visualTime, time)\r\n        this.noteLayer.update(musicTime.visualTime, time)\r\n    }\r\n}\r\n\r\n\r\n","import { Container, Texture, Sprite } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { GameState } from \"../../Core/GameState\";\r\nimport { GameConfig } from \"../../Core/GameConfig\";\r\nimport { SpriteInfo, NumberSpriteInfo } from \"../../Common/InfoType\";\r\nimport { InfoSprite } from \"../../Common/InfoSprite\";\r\nimport { Resources, GlobalEvents } from \"../../Utils/SymbolClasses\";\r\nimport { InfoNumberSprite } from \"../../Common/InfoNumberSprite\";\r\n\r\n\r\ntype UILayerInfo = {\r\n    judge: SpriteInfo\r\n    pause: SpriteInfo\r\n    combo: NumberSpriteInfo\r\n    score: NumberSpriteInfo\r\n    other?: SpriteInfo[]\r\n}\r\n\r\n@injectable()\r\nexport class UILayer extends Container {\r\n    constructor(state: GameState, config: GameConfig, resources: Resources, events: GlobalEvents) {\r\n        super()\r\n\r\n        const info = resources.ui.data.info.game as UILayerInfo\r\n        const textures = resources.ui.textures\r\n\r\n        if (info.other instanceof Array) {\r\n            info.other.forEach(x => {\r\n                this.addChild(new InfoSprite(x, textures))\r\n            })\r\n        }\r\n\r\n        const judge = new InfoSprite(info.judge, textures)\r\n        const pause = new InfoSprite(info.pause, textures)\r\n\r\n        const combo = new InfoNumberSprite(info.combo, textures)\r\n        const score = new InfoNumberSprite(info.score, textures)\r\n\r\n        // if (!config.autoplay)\r\n        this.addChild(judge)\r\n        this.addChild(pause)\r\n        this.addChild(combo)\r\n        this.addChild(score)\r\n\r\n        pause.interactive = true\r\n        //        pause.buttonMode = true\r\n        pause.on(\"pointertap\", () => {\r\n            state.onPause.emit()\r\n        })\r\n\r\n        score.setValue(0)\r\n        combo.visible = false\r\n\r\n        state.onJudge.add(note => {\r\n            if (!this.parent) return \"remove\"\r\n            judge.texture = textures[note.judge]\r\n            judge.resetAnim()\r\n            if (state.currentCombo > 0) {\r\n                combo.setValue(state.currentCombo)\r\n                combo.resetAnim()\r\n                combo.visible = true\r\n            } else {\r\n                combo.visible = false\r\n            }\r\n            score.setValue(state.score)\r\n            score.resetAnim()\r\n        })\r\n\r\n        events.Update.add(dt => {\r\n            if (!this.parent) return \"remove\"\r\n            if (state.paused) return\r\n            this.children.forEach(x => {\r\n                if (x instanceof InfoSprite || x instanceof InfoNumberSprite) {\r\n                    x.update(dt)\r\n                }\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\n","import { Container } from \"pixi.js\";\r\nimport { injectable } from \"inversify\";\r\nimport { Container as IOC } from \"inversify\"\r\nimport { FinishLayer } from \"../Layers/FinishLayer\";\r\nimport { GlobalEvents, MainStage } from \"../Utils/SymbolClasses\";\r\nimport { ReadyScene } from \"./ReadyScene\";\r\nimport { SceneSwitcher } from \"../Utils/SceneSwitcher\";\r\n\r\n@injectable()\r\nexport class FinishScene extends Container {\r\n    constructor(ioc: IOC, events: GlobalEvents, swicher: SceneSwitcher) {\r\n        super()\r\n\r\n        const layer = ioc.resolve(FinishLayer)\r\n\r\n        layer.onBack = () => {\r\n            events.End.emit()\r\n        }\r\n        layer.onRetry = () => {\r\n            const ready = ioc.resolve(ReadyScene)\r\n            swicher.switch(this, ready).outEnd.add(() => {\r\n                this.destroy({ children: true })\r\n                return \"remove\"\r\n            })\r\n        }\r\n\r\n        this.addChild(layer)\r\n    }\r\n}\r\n","import { Container } from \"pixi.js\";\r\nimport { injectable, Container as IOC } from \"inversify\";\r\nimport { GameLayer } from \"../Layers/GameLayer\";\r\nimport { DebugLayer } from \"../Layers/DebugLayer\";\r\nimport { NoteHelper, MainStage, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { GameState } from \"../Core/GameState\";\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\nimport { AutoJudgeManager } from \"../Core/JudgeManager.Auto\";\r\nimport { JudgeManager } from \"../Core/JudgeManager\";\r\nimport { MusciManager } from \"../Core/MusicManager\";\r\nimport { SoundManager } from \"../Core/SoundManager\";\r\nimport { PauseLayer } from \"../Layers/PauseLayer\";\r\nimport { FinishScene } from \"./FinishScene\";\r\nimport { SceneSwitcher } from \"../Utils/SceneSwitcher\";\r\nimport { ReadyScene } from \"./ReadyScene\";\r\n\r\n@injectable()\r\nexport class GameScene extends Container {\r\n    constructor(ioc: IOC, config: GameConfig, stage: MainStage, events: GlobalEvents, switcher: SceneSwitcher) {\r\n        super()\r\n\r\n        if (ioc.isBound(NoteHelper)) ioc.unbind(NoteHelper)\r\n        ioc.bind(NoteHelper).toConstantValue(ioc.resolve(NoteHelper))\r\n        if (ioc.isBound(GameState)) ioc.unbind(GameState)\r\n        const state = ioc.resolve(GameState)\r\n        ioc.bind(GameState).toConstantValue(state)\r\n\r\n        const judger = config.autoplay ? ioc.resolve(AutoJudgeManager)\r\n            : ioc.resolve(JudgeManager)\r\n\r\n        ioc.resolve(MusciManager)\r\n        ioc.resolve(SoundManager)\r\n\r\n        this.addChild(ioc.resolve(GameLayer))\r\n        if (config.debug)\r\n            this.addChild(ioc.resolve(DebugLayer))\r\n\r\n        const pauseLayer = ioc.resolve(PauseLayer)\r\n\r\n        state.onPause.add(() => {\r\n            this.addChild(pauseLayer)\r\n        })\r\n\r\n        state.onContinue.add(() => {\r\n            this.removeChild(pauseLayer)\r\n        })\r\n\r\n        state.onEnd.add(() => {\r\n            const finish = ioc.resolve(FinishScene)\r\n            switcher.switch(this, finish).outEnd.add(() => {\r\n                this.destroy({ children: true })\r\n                return \"remove\"\r\n            })\r\n        })\r\n\r\n        state.onRestart.add(() => {\r\n            const ready = ioc.resolve(ReadyScene)\r\n            switcher.switch(this, ready).outEnd.add(() => {\r\n                this.destroy({ children: true })\r\n                return \"remove\"\r\n            })\r\n        })\r\n\r\n        state.onAbort.add(() => {\r\n            events.End.emit()\r\n        })\r\n    }\r\n}\r\n","import { Howl } from \"howler\"\r\nimport { Container, Loader, LoaderResource } from 'pixi.js'\r\nimport { Container as IOC, injectable, inject } from 'inversify'\r\nimport { GameLoadConfig, jsonNames, soundNames } from '../Core/GameConfig'\r\nimport { Resources, GlobalEvents, MainStage } from \"../Utils/SymbolClasses\"\r\nimport { LoadingLayer } from \"../Layers/LoadingLayer\"\r\nimport { BackgroundLayer } from \"../Layers/BackgroundLayer\"\r\nimport { ReadyScene } from \"./ReadyScene\"\r\nimport { SceneSwitcher } from \"../Utils/SceneSwitcher\"\r\n\r\n\r\n@injectable()\r\nexport class LoadingScene extends Container {\r\n    constructor(\r\n        private ioc: IOC,\r\n        // private stage: MainStage,\r\n        config: GameLoadConfig,\r\n    ) {\r\n        super()\r\n\r\n        const loader = new Loader()\r\n        loader.pre(howlerMiddleware)\r\n\r\n        loader.add(\"music\", config.musicSrc, { loadType: LoaderResource.LOAD_TYPE.AUDIO })\r\n        loader.add(\"background\", config.backgroundSrc, { loadType: LoaderResource.LOAD_TYPE.IMAGE })\r\n        loader.add(\"map\", config.mapSrc, { loadType: LoaderResource.LOAD_TYPE.XHR })\r\n        for (const key in jsonNames)\r\n            loader.add(key, `${config.skin}/${jsonNames[key as keyof typeof jsonNames]}`)\r\n        for (const key in soundNames)\r\n            loader.add(key, `${config.skin}/${soundNames[key as keyof typeof soundNames]}`)\r\n\r\n\r\n        loader.on(\"progress\", this.progress)\r\n        loader.on(\"error\", this.error)\r\n        loader.load(this.loaded)\r\n\r\n        this.layer = ioc.resolve(LoadingLayer)\r\n        this.addChild(this.layer)\r\n    }\r\n\r\n    private layer: LoadingLayer\r\n\r\n    private loadedcount = 0\r\n    private progress = (loader: Loader) => {\r\n        this.loadedcount++\r\n        let count = 0\r\n        for (const key in loader.resources) count++\r\n\r\n        this.layer.progress.set(this.loadedcount === count ? 1 : this.loadedcount / (count + 3))\r\n    }\r\n\r\n    private loaded = (loader: Loader, res: Partial<Record<string, LoaderResource>>) => {\r\n        console.log(\"loaded\")\r\n        this.ioc.bind(Resources).toConstantValue(res)\r\n        const stage = this.ioc.get(MainStage)\r\n\r\n        stage.addChildAt(this.ioc.resolve(BackgroundLayer), 0)\r\n        const ready = this.ioc.resolve(ReadyScene)\r\n\r\n        const swicher = this.ioc.get(SceneSwitcher)\r\n        swicher.switch(this, ready).outEnd.add(() => {\r\n            this.destroy({ children: true })\r\n            return \"remove\"\r\n        })\r\n    }\r\n\r\n    private alertedError = false\r\n    private error = (err: Error, loader: Loader, res: LoaderResource) => {\r\n        console.error(\"load \", res, \" error:\", err)\r\n        if (!this.alertedError) {\r\n            alert(\"load \" + res.url + \" error: \" + err)\r\n            this.alertedError = true\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction howlerMiddleware(resource: LoaderResource, next: () => void) {\r\n    if (resource.loadType !== LoaderResource.LOAD_TYPE.AUDIO) {\r\n        next()\r\n        return\r\n    }\r\n\r\n    const howl = new Howl({\r\n        src: resource.url,\r\n        format: /\\..{1,5}$/.test(resource.url) ? undefined : \"mp3\",\r\n        onload: () => {\r\n            resource.data = howl\r\n            resource.complete()\r\n            next()\r\n        },\r\n        onloaderror: (id, err) => {\r\n            resource.error = err\r\n            resource.abort(\"load error\")\r\n            next()\r\n        }\r\n    })\r\n}\r\n\r\n\r\n","import { Container } from \"pixi.js\";\r\nimport { injectable, Container as IOC } from \"inversify\";\r\nimport { ReadyLayer } from \"../Layers/ReadyLayer\";\r\nimport { GameScene } from \"./GameScene\";\r\nimport { MainStage, GlobalEvents } from \"../Utils/SymbolClasses\";\r\nimport { GameConfig } from \"../Core/GameConfig\";\r\nimport { SceneSwitcher } from \"../Utils/SceneSwitcher\";\r\n\r\n\r\n@injectable()\r\nexport class ReadyScene extends Container {\r\n    constructor(ioc: IOC, swicher: SceneSwitcher, events: GlobalEvents, config: GameConfig) {\r\n        super()\r\n\r\n        const layer = ioc.resolve(ReadyLayer)\r\n        layer.start = (auto: boolean) => {\r\n            if (auto) config.autoplay = true\r\n            else config.autoplay = false\r\n\r\n            const game = ioc.resolve(GameScene)\r\n            swicher.switch(this, game).outEnd.add(() => {\r\n                this.destroy({ children: true })\r\n                return \"remove\"\r\n            })\r\n        }\r\n\r\n        this.addChild(layer)\r\n    }\r\n}\r\n\r\n\r\n","\r\n\r\nexport class GameEvent<Args extends any[]> {\r\n\r\n    private listeners: Array<(...args: Args) => any> = []\r\n    private clearFlag = false\r\n    prevArgs: Args = null as any as Args\r\n\r\n    emit(...args: Args) {\r\n        this.clearFlag = false\r\n        let list = this.listeners.splice(0)\r\n        this.listeners.length = 0\r\n        list = list.filter(l => {\r\n            try {\r\n                return l(...args) !== \"remove\"\r\n            } catch (error) {\r\n                console.error(error)\r\n                return false\r\n            }\r\n        })\r\n        this.listeners = this.listeners.concat(list)\r\n        if (this.clearFlag) this.listeners.length = 0\r\n        this.prevArgs = args\r\n    }\r\n\r\n    /** a listener returns \"remove\" to remove itself from this event */\r\n    add(listener: (...args: Args) => any) {\r\n        this.listeners.push(listener)\r\n    }\r\n    remove(listener: (...args: Args) => void) {\r\n        const index = this.listeners.indexOf(listener)\r\n        if (index >= 0) this.listeners = this.listeners.splice(index, 1)\r\n    }\r\n\r\n    clear() {\r\n        this.listeners.length = 0\r\n        this.clearFlag = true\r\n    }\r\n}\r\n\r\n","import { injectable } from \"inversify\";\r\nimport { MainStage, GlobalEvents } from \"./SymbolClasses\";\r\nimport { Animation, AnimationManager, CreatePixiTargetPropMapper, createSimpleAnimation, keyFramePresets } from \"../Common/Animation\";\r\nimport { Container } from \"pixi.js\";\r\nimport { GameEvent } from \"./GameEvent\";\r\n\r\n\r\n@injectable()\r\nexport class SceneSwitcher {\r\n    constructor(private stage: MainStage, private events: GlobalEvents) { }\r\n\r\n    switch(from: Container, to: Container, outTime = 0.6, inTime = 0.6, inDelay = 0) {\r\n        const outAnim = new AnimationManager(CreatePixiTargetPropMapper(from))\r\n        const inAnim = new AnimationManager(CreatePixiTargetPropMapper(to))\r\n        to.alpha = 0\r\n        outAnim.animations.set(\"alpha\", createSimpleAnimation(1, 0, outTime, keyFramePresets.easeOut))\r\n        inAnim.animations.set(\"alpha\", createSimpleAnimation(0, 1, inTime, keyFramePresets.easeOut))\r\n\r\n        let ended = 0\r\n        this.events.Update.add(dt => {\r\n            if (outAnim.ended) return \"remove\"\r\n            outAnim.update(dt)\r\n            if (outAnim.currentTime > inDelay)\r\n                inAnim.update(dt)\r\n        })\r\n\r\n        const i = this.stage.getChildIndex(from)\r\n        this.stage.addChildAt(to, i)\r\n\r\n        inAnim.onEnd.add(() => {\r\n            ended++\r\n        })\r\n        outAnim.onEnd.add(() => {\r\n            this.stage.removeChild(from)\r\n            ended++\r\n        })\r\n\r\n        return {\r\n            inEnd: inAnim.onEnd,\r\n            outEnd: outAnim.onEnd,\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","import { GameEvent } from \"./GameEvent\"\r\nimport { LoaderResource, Container, Sprite } from \"pixi.js\"\r\nimport { injectable } from \"inversify\"\r\nimport { GameConfig, staytime, GameLoadConfig } from \"../Core/GameConfig\"\r\nimport { JudgePoint } from \"../Core/GameMap\"\r\nimport { projection } from \"../Core/Projection\"\r\nimport { LaneCenterXs } from \"../Core/Constants\"\r\n\r\nexport class MainStage extends Container { }\r\n\r\nexport class GlobalEvents {\r\n    /** delta, time in seconds */\r\n    Update = new GameEvent<[number, number]>()\r\n    /** width, height */\r\n    Resize = new GameEvent<[number, number]>()\r\n    WindowBlur = new GameEvent<[]>()\r\n    WindowFocus = new GameEvent<[]>()\r\n    End = new GameEvent<[]>()\r\n}\r\n\r\nexport class Resources {\r\n    [key: string]: LoaderResource\r\n}\r\n\r\n@injectable()\r\nexport class NoteHelper {\r\n    static noteInitScale = 0.7\r\n    constructor(config: GameConfig) {\r\n        this.staytime = staytime(config.speed)\r\n        this.noteScale = NoteHelper.noteInitScale * config.noteScale\r\n    }\r\n\r\n    noteScale: number\r\n    staytime: number\r\n\r\n    /** pre-multiplied config note scale */\r\n    calc(note: JudgePoint, musicTime: number) {\r\n        const dt = musicTime - note.time\r\n        const t = dt / this.staytime\r\n        return projection(t, LaneCenterXs[note.lane])\r\n    }\r\n\r\n    setScale(note: Sprite, scale: number) {\r\n        note.scale.set(scale * this.noteScale)\r\n    }\r\n}\r\n\r\n","\r\nconst now = () => performance.now() / 1000\r\n\r\nexport class Ticker {\r\n\r\n    /** delta and now are in seconds */\r\n    Tick = new Set<(delta: number, now: number) => void>()\r\n    private lasttime = 0\r\n    private StopFlag = true\r\n    private EndFlag = true\r\n    SkipFrame = 0;\r\n\r\n    Start() {\r\n        if (!this.EndFlag) return;\r\n        this.StopFlag = false\r\n\r\n        let skipframecounter = 0\r\n        const func = () => {\r\n            this.EndFlag = false\r\n            if (this.StopFlag) {\r\n                this.EndFlag = true\r\n                return\r\n            }\r\n\r\n            requestAnimationFrame(func)\r\n\r\n            if (skipframecounter > 0) {\r\n                skipframecounter--;\r\n                return\r\n            }\r\n            skipframecounter = this.SkipFrame\r\n\r\n            const n = now()\r\n            if (this.Tick)\r\n                this.Tick.forEach(t => t(n - this.lasttime, n))\r\n\r\n            this.lasttime = n\r\n        }\r\n        this.lasttime = now()\r\n        func()\r\n    }\r\n\r\n    Stop() {\r\n        this.StopFlag = true\r\n    }\r\n}\r\n","// tslint:disable: no-bitwise\r\nexport function getByte(number: number, byte: number) {\r\n    const off = (byte | 0) * 8\r\n    const mask = 0xFF << off\r\n    return (number & mask) >> off\r\n}\r\nexport function setByte(number: number, byte: number, value: number) {\r\n    const off = (byte | 0) * 8\r\n    const v = (value & 0xFF) << off\r\n    const imask = ~(0xFF << off)\r\n    number = (number & imask) | v\r\n    return number\r\n}\r\n\r\nexport const colorByte = {\r\n    r: 2,\r\n    g: 1,\r\n    b: 0,\r\n}\r\n\r\nexport class ObjectPool<T> {\r\n    private pool: T[] = []\r\n\r\n    newObj: () => T\r\n    pre?: (o: T) => T\r\n    after?: (o: T) => T\r\n\r\n    get() {\r\n        if (this.pool.length <= 0) {\r\n            this.pool.push(this.newObj())\r\n        }\r\n        const v = this.pool.pop()\r\n        if (this.pre) return this.pre(v)\r\n        return v\r\n    }\r\n\r\n    save(o: T) {\r\n        if (this.after) this.pool.push(this.after(o))\r\n        else this.pool.push(o)\r\n    }\r\n\r\n    ensure(n: number) {\r\n        while (this.pool.length < n) this.pool.push(this.newObj())\r\n    }\r\n\r\n    destroy() {\r\n        this.pool.length = 0\r\n    }\r\n}\r\n\r\n/** a listener returns \"remove\" to remove itself from this.event */\r\nexport function addAutoListener<K extends keyof WindowEventMap>\r\n    (element: HTMLElement | Window, event: K, listener: (ev: WindowEventMap[K]) => any) {\r\n    const wrap = (ev: WindowEventMap[K]) => {\r\n        if (listener(ev) === \"remove\") element.removeEventListener(event, wrap)\r\n    }\r\n    element.addEventListener(event, wrap)\r\n}\r\n","\r\n\r\nexport { Game } from \"./game/Game\";\r\nexport { GameConfig, GameLoadConfig } from \"./game/Core/GameConfig\";\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE_pixi_js__;"],"sourceRoot":""}